{"ast":null,"code":"var _jsxFileName = \"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/ReviewApplications.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst ReviewApplications = () => {\n  const [state, setState] = useState({\n    loginRedirect: false,\n    cookie: {}\n  }); // check auth\n\n  useEffect(() => {\n    const cookie = isLoggedIn();\n\n    if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n      setState({ ...state,\n        cookie\n      });\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n\n  }, []);\n  const [applications, setApplications] = useState([]);\n  useEffect(() => {\n    if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n      getData(\"/application?status=pending\").then(({\n        target\n      }) => {\n        setApplications(JSON.parse(target.response));\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }, [state.cookie]);\n\n  const submitDecision = (applicationId, decision) => {\n    const updatedApplicationState = decision ? \"true\" : \"false\";\n    sendData(decision, `/application/${applicationId}?approve=${updatedApplicationState}`, \"PUT\").then(({\n      target\n    }) => {\n      if (target.status === 200) {\n        const remainingApplications = applications.filter(application => {\n          return application.id !== applicationId;\n        });\n        setApplications(remainingApplications);\n      }\n    }).catch(error => {\n      console.log(\"Error updating application status: \", error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, state.loginRedirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: \"/login\",\n      state: {\n        from: \"/review-applications\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(NavLinks, {\n    isTrustedVolunteer: state.cookie.isTrustedVolunteer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    class: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, \"Review Applications\"), applications.length ? /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, \"First Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  }, \"Last Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 33\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 33\n    }\n  }, \"Street\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 33\n    }\n  }, \"City\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, \"State\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  }, \"Zip\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }, \"Phone Number\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 33\n    }\n  }, \"Co-Applicant First Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 33\n    }\n  }, \"Co-Applicant Last Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 33\n    }\n  }, \"Decision\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, applications.map(application => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: application.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 41\n      }\n    }, application.applicant.firstName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 41\n      }\n    }, application.applicant.lastName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 41\n      }\n    }, application.applicant.email), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 41\n      }\n    }, application.applicant.street), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 41\n      }\n    }, application.applicant.city), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 41\n      }\n    }, application.applicant.state), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 41\n      }\n    }, application.applicant.zip), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 41\n      }\n    }, application.applicant.phoneNumber), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 41\n      }\n    }, application.coApplicantFirstName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 41\n      }\n    }, application.coApplicantLastName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        submitDecision(application.id, true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 45\n      }\n    }, \"Approve\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        submitDecision(application.id, false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 45\n      }\n    }, \"Reject\")));\n  }))) : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 22\n    }\n  }, \"There are not any applications currently pending review.\")));\n};\n\nexport default ReviewApplications;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/ReviewApplications.js"],"names":["React","useEffect","useState","Redirect","getData","sendData","isLoggedIn","NavLinks","ReviewApplications","state","setState","loginRedirect","cookie","hasOwnProperty","isTrustedVolunteer","applications","setApplications","then","target","JSON","parse","response","catch","error","console","log","submitDecision","applicationId","decision","updatedApplicationState","status","remainingApplications","filter","application","id","pathname","from","length","map","applicant","firstName","lastName","email","street","city","zip","phoneNumber","coApplicantFirstName","coApplicantLastName"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\"\n\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst ReviewApplications = () => {\n    const [state, setState] = useState({\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    const [applications, setApplications] = useState([]);\n\n    useEffect(() => {\n        if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n            getData(\"/application?status=pending\")\n                .then(({ target }) => {\n                    setApplications(JSON.parse(target.response));\n                })\n                .catch(error => {\n                    console.log(error);\n                })\n        }\n    }, [state.cookie]);\n\n    const submitDecision = (applicationId, decision) => {\n        const updatedApplicationState = decision ? \"true\" : \"false\";\n        sendData(decision, `/application/${applicationId}?approve=${updatedApplicationState}`, \"PUT\")\n            .then(({ target }) => {\n                if (target.status === 200) {\n                    const remainingApplications = applications.filter(application => {\n                        return application.id !== applicationId;\n                    });\n                    setApplications(remainingApplications);\n                }\n\n            })\n            .catch(error => {\n                console.log(\"Error updating application status: \", error);\n            })\n    }\n\n    return (\n        <>\n            {state.loginRedirect && <Redirect to={{ pathname: \"/login\", state: { from: \"/review-applications\" } }} />}\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <main class=\"container\">\n                <h1>Review Applications</h1>\n                {applications.length ? (\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>First Name</th>\n                                <th>Last Name</th>\n                                <th>Email</th>\n                                <th>Street</th>\n                                <th>City</th>\n                                <th>State</th>\n                                <th>Zip</th>\n                                <th>Phone Number</th>\n                                <th>Co-Applicant First Name</th>\n                                <th>Co-Applicant Last Name</th>\n                                <th>Decision</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {applications.map(application => {\n                                return (\n                                    <tr key={application.id}>\n                                        <td>{application.applicant.firstName}</td>\n                                        <td>{application.applicant.lastName}</td>\n                                        <td>{application.applicant.email}</td>\n                                        <td>{application.applicant.street}</td>\n                                        <td>{application.applicant.city}</td>\n                                        <td>{application.applicant.state}</td>\n                                        <td>{application.applicant.zip}</td>\n                                        <td>{application.applicant.phoneNumber}</td>\n                                        <td>{application.coApplicantFirstName}</td>\n                                        <td>{application.coApplicantLastName}</td>\n                                        <td>\n                                            <button type=\"button\" onClick={() => {\n                                                submitDecision(application.id, true);\n                                            }} >Approve</button>\n                                            <button type=\"button\" onClick={() => {\n                                                submitDecision(application.id, false);\n                                            }} >Reject</button>\n                                        </td>\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n\n                    </table >\n                ) : (<h3>There are not any applications currently pending review.</h3>)\n                }\n            </main>\n        </>\n    );\n}\n\nexport default ReviewApplications;"]},"metadata":{},"sourceType":"module"}