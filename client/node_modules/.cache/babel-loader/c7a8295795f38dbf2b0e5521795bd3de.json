{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{getData}from\"../services/api\";import{isLoggedIn}from\"../services/auth\";import{NavLinks}from\"../components\";var VolunteerLookup=function VolunteerLookup(){var _useState=useState({data:[],errorMessage:\"\",timeout:-1,cookie:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];// check auth\nuseEffect(function(){var cookie=isLoggedIn();if(cookie.hasOwnProperty(\"isTrustedVolunteer\")&&cookie.isTrustedVolunteer){setState(_objectSpread(_objectSpread({},state),{},{cookie:cookie}));}/* eslint-disable react-hooks/exhaustive-deps */},[]);var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),volunteerName=_useState4[0],setVolunteerName=_useState4[1];useEffect(function(){if(state.cookie.hasOwnProperty(\"isTrustedVolunteer\")&&state.cookie.isTrustedVolunteer){getData(\"/volunteer\").then(function(_ref){var target=_ref.target;if(target){setState(_objectSpread(_objectSpread({},state),{},{data:JSON.parse(target.response)}));}else{setState(_objectSpread(_objectSpread({},state),{},{errorMessage:target.response}));}}).catch(function(error){console.log(error);setState(_objectSpread(_objectSpread({},state),{},{errorMessage:JSON.stringify(error)}));});}},[state.cookie]);var getVolunteersLike=function getVolunteersLike(){getData(\"/volunteer?like=\".concat(volunteerName)).then(function(_ref2){var target=_ref2.target;if(target.status===200){var data=JSON.parse(target.response);console.log(data);setState(_objectSpread(_objectSpread({},state),{},{data:data}));}}).catch(function(error){console.log(error);}).finally(function(){console.log(state.data);});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLinks,{isTrustedVolunteer:state.cookie.isTrustedVolunteer}),/*#__PURE__*/React.createElement(\"h1\",null,\"Volunteer Lookup\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"volunteer-name\"},\"Volunteer name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:volunteerName,onChange:function onChange(_ref3){var target=_ref3.target;setVolunteerName(target.value);clearTimeout(state.timeout);var timeout=setTimeout(function(){getVolunteersLike();},600);setState(_objectSpread(_objectSpread({},state),{},{timeout:timeout}));}})),state.data.length?/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"First Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Last Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Phone Number\"))),/*#__PURE__*/React.createElement(\"tbody\",null,state.data.map(function(volunteer){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,volunteer.firstName),/*#__PURE__*/React.createElement(\"th\",null,volunteer.lastName),/*#__PURE__*/React.createElement(\"th\",null,volunteer.email),/*#__PURE__*/React.createElement(\"th\",null,volunteer.cell));}))):/*#__PURE__*/React.createElement(\"p\",null,\" No volunteers found\"),state.errorMessage&&/*#__PURE__*/React.createElement(\"div\",{styles:{color:\"red\"}},state.errorMessage));};export default VolunteerLookup;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/VolunteerLookup.js"],"names":["React","useEffect","useState","getData","isLoggedIn","NavLinks","VolunteerLookup","data","errorMessage","timeout","cookie","state","setState","hasOwnProperty","isTrustedVolunteer","volunteerName","setVolunteerName","then","target","JSON","parse","response","catch","error","console","log","stringify","getVolunteersLike","status","finally","value","clearTimeout","setTimeout","length","map","volunteer","firstName","lastName","email","cell","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { getData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst VolunteerLookup = () => {\n    const [state, setState] = useState({\n        data: [],\n        errorMessage: \"\",\n        timeout: -1,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    const [volunteerName, setVolunteerName] = useState(\"\");\n\n    useEffect(() => {\n        if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n            getData(\"/volunteer\")\n                .then(({ target }) => {\n                    if (target) {\n                        setState({ ...state, data: JSON.parse(target.response) });\n                    } else {\n                        setState({ ...state, errorMessage: target.response });\n                    }\n                })\n                .catch(error => {\n                    console.log(error);\n                    setState({ ...state, errorMessage: JSON.stringify(error) });\n                })\n        }\n    }, [state.cookie]);\n\n    const getVolunteersLike = () => {\n        getData(`/volunteer?like=${volunteerName}`)\n            .then(({ target }) => {\n                if (target.status === 200) {\n                    const data = JSON.parse(target.response)\n                    console.log(data);\n                    setState({ ...state, data });\n\n                }\n            })\n            .catch(error => {\n                console.log(error);\n            })\n            .finally(() => {\n                console.log(state.data);\n            })\n    };\n\n    return (\n        <>\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <h1>Volunteer Lookup</h1>\n            <div className=\"form-unit\">\n                <label htmlFor=\"volunteer-name\">Volunteer name:</label>\n                <input\n                    type=\"text\"\n                    value={volunteerName}\n                    onChange={({ target }) => {\n                        setVolunteerName(target.value);\n                        clearTimeout(state.timeout);\n                        const timeout = setTimeout(() => {\n                            getVolunteersLike()\n                        }, 600)\n                        setState({ ...state, timeout });\n                    }}\n                />\n            </div>\n\n            {\n                state.data.length ? (\n\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>First Name</th>\n                                <th>Last Name</th>\n                                <th>Email</th>\n                                <th>Phone Number</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {\n                                state.data.map((volunteer) => {\n                                    return (\n                                        <tr>\n                                            <th>{volunteer.firstName}</th>\n                                            <th>{volunteer.lastName}</th>\n                                            <th>{volunteer.email}</th>\n                                            <th>{volunteer.cell}</th>\n                                        </tr>\n                                    )\n                                })\n                            }\n                        </tbody>\n                    </table>\n                ) : (\n                        <p> No volunteers found</p>)\n\n\n            }\n            {state.errorMessage && (\n                <div styles={{ color: \"red\" }}>{state.errorMessage}</div>\n            )}\n        </>\n    );\n}\n\nexport default VolunteerLookup;\n\n"]},"metadata":{},"sourceType":"module"}