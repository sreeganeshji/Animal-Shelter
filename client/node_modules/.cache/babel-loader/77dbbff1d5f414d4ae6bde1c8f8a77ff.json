{"ast":null,"code":"var _jsxFileName = \"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/Login.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { getData, sendData } from \"../services/api\";\nimport { NavLinks } from \"../components\";\n\nconst Login = () => {\n  const [state, setState] = useState({\n    email: \"\",\n    password: \"\",\n    errorMessage: \"\",\n    redirect: false\n  });\n  useEffect(() => {\n    getData(\"/logout\").then(data => {\n      setState({ ...state,\n        loginRedirect: true\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, []);\n\n  const handleEmailChange = ({\n    target\n  }) => {\n    setState({ ...state,\n      email: target.value\n    });\n  };\n\n  const handlePasswordChange = ({\n    target\n  }) => {\n    setState({ ...state,\n      password: target.value\n    });\n  };\n\n  const submitForm = form => {\n    const {\n      email,\n      password\n    } = state;\n\n    if (password && email.indexOf(\"@\") !== 0 && email.length > 4) {\n      sendData({\n        email,\n        password\n      }, \"/login\").then(data => {\n        const {\n          target\n        } = data;\n\n        if (target.status === 200) {\n          // redirect to Dog Dashboard\n          const volunteer = JSON.parse(target.response);\n          localStorage.setItem(\"volunteerId\", volunteer.id);\n          localStorage.setItem(\"isTrusted\", volunteer.isTrusted);\n          setState({ ...state,\n            redirect: true\n          });\n        } else {\n          setState({ ...state,\n            errorMessage: target.response\n          });\n        }\n      }).catch(error => {\n        setState({ ...state,\n          errorMessage: error\n        });\n      });\n    } else {\n      if (!password) {\n        setState({ ...state,\n          errorMessage: \"Please enter valid password.\"\n        });\n      } else {\n        setState({ ...state,\n          errorMessage: \"Please enter valid email address.\"\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavLinks, {\n    titleOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n    action: \"/login\",\n    method: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    onChange: handleEmailChange,\n    value: state.email,\n    autoComplete: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, \"Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    onChange: handlePasswordChange,\n    value: state.password,\n    autoComplete: \"current-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: submitForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, \"Log In\")), state.errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 40\n    }\n  }, state.errorMessage), state.redirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: \"/dog-dashboard\",\n      state: {\n        from: \"/login\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 36\n    }\n  })));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/Login.js"],"names":["React","useEffect","useState","Redirect","getData","sendData","NavLinks","Login","state","setState","email","password","errorMessage","redirect","then","data","loginRedirect","catch","error","console","log","handleEmailChange","target","value","handlePasswordChange","submitForm","form","indexOf","length","status","volunteer","JSON","parse","response","localStorage","setItem","id","isTrusted","color","pathname","from"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport { getData, sendData } from \"../services/api\";\nimport { NavLinks } from \"../components\";\n\nconst Login = () => {\n    const [state, setState] = useState({\n        email: \"\",\n        password: \"\",\n        errorMessage: \"\",\n        redirect: false\n    });\n\n    useEffect(() => {\n        getData(\"/logout\")\n            .then(data => {\n                setState({ ...state, loginRedirect: true });\n            })\n            .catch(error => {\n                console.log(error);\n            })\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, [])\n\n    const handleEmailChange = ({ target }) => {\n        setState({ ...state, email: target.value });\n    }\n\n    const handlePasswordChange = ({ target }) => {\n        setState({ ...state, password: target.value });\n    }\n\n    const submitForm = form => {\n        const { email, password } = state;\n\n        if (password && email.indexOf(\"@\") !== 0 && email.length > 4) {\n            sendData({ email, password }, \"/login\")\n                .then(data => {\n                    const { target } = data;\n                    if (target.status === 200) {\n                        // redirect to Dog Dashboard\n                        const volunteer = JSON.parse(target.response);\n                        localStorage.setItem(\"volunteerId\", volunteer.id);\n                        localStorage.setItem(\"isTrusted\", volunteer.isTrusted);\n                        setState({ ...state, redirect: true });\n                    } else {\n                        setState({ ...state, errorMessage: target.response })\n                    }\n                })\n                .catch(error => {\n                    setState({ ...state, errorMessage: error })\n                });\n        } else {\n            if (!password) {\n                setState({ ...state, errorMessage: \"Please enter valid password.\" })\n            } else {\n                setState({ ...state, errorMessage: \"Please enter valid email address.\" })\n            }\n        }\n    }\n    return (\n        <>\n            <NavLinks titleOnly={true} />\n            <main className=\"container\">\n                <h1>Login</h1>\n\n                <form action=\"/login\" method=\"post\">\n\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"email\">Email:</label>\n                        <input type=\"email\" id=\"email\" name=\"email\" onChange={handleEmailChange} value={state.email} autoComplete=\"username\" />\n                    </div>\n\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"password\">Password:</label>\n                        <input type=\"password\" id=\"password\" name=\"password\" onChange={handlePasswordChange} value={state.password} autoComplete=\"current-password\" />\n                    </div>\n\n                    <button type=\"button\" onClick={submitForm}>Log In</button>\n\n                </form>\n                {state.errorMessage && <div style={{ color: \"red\" }}>{state.errorMessage}</div>}\n                {state.redirect && <Redirect to={{ pathname: \"/dog-dashboard\", state: { from: \"/login\" } }} />}\n            </main>\n        </>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}