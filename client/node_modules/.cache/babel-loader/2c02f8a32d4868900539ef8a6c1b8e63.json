{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{getData}from\"../services/api\";import{isLoggedIn}from\"../services/auth\";import{NavLinks}from\"../components\";var AnimalControlReport=function AnimalControlReport(){var _useState=useState({data:[],errorMessage:\"\",cookie:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];// check auth\nuseEffect(function(){var cookie=isLoggedIn();if(cookie.hasOwnProperty(\"isTrustedVolunteer\")&&cookie.isTrustedVolunteer){setState(_objectSpread(_objectSpread({},state),{},{cookie:cookie}));}/* eslint-disable react-hooks/exhaustive-deps */},[]);useEffect(function(){if(state.cookie.hasOwnProperty(\"isTrustedVolunteer\")&&state.cookie.isTrustedVolunteer){getData(\"/animal-control-report\").then(function(_ref){var target=_ref.target;if(target.status===200){setState(_objectSpread(_objectSpread({},state),{},{data:JSON.parse(target.response)}));}else{setState(_objectSpread(_objectSpread({},state),{},{errorMessage:target.response}));}}).catch(function(error){console.log(error);setState(_objectSpread(_objectSpread({},state),{},{errorMessage:JSON.stringify(error)}));});}},[state.cookie]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLinks,{isTrustedVolunteer:state.cookie.isTrustedVolunteer}),/*#__PURE__*/React.createElement(\"main\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Animal Control Report\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Month\"),/*#__PURE__*/React.createElement(\"td\",null,\"Year\"),/*#__PURE__*/React.createElement(\"td\",null,\"Total Dogs Count\"),/*#__PURE__*/React.createElement(\"td\",null,\"Dogs 60 Days Count\"),/*#__PURE__*/React.createElement(\"td\",null,\"Expenses\")),/*#__PURE__*/React.createElement(\"tbody\",null,state.data.length&&state.data.map(function(datum){var expenseDollars=Math.floor(datum.expenses);var expenseCents=function(){var cents=Math.round(datum.expenses%1*100);return cents<10?\"0\"+cents:cents;}();return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,datum.month),/*#__PURE__*/React.createElement(\"td\",null,datum.year),/*#__PURE__*/React.createElement(\"td\",null,datum.dogsTotalCount),/*#__PURE__*/React.createElement(\"td\",null,datum.dogsSixtyDaysCount),/*#__PURE__*/React.createElement(\"td\",null,\"$\",expenseDollars,\".\",expenseCents));}))),state.errorMessage&&/*#__PURE__*/React.createElement(\"div\",{styles:{color:\"red\"}},state.errorMessage)));};export default AnimalControlReport;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AnimalControlReport.js"],"names":["React","useEffect","useState","getData","isLoggedIn","NavLinks","AnimalControlReport","data","errorMessage","cookie","state","setState","hasOwnProperty","isTrustedVolunteer","then","target","status","JSON","parse","response","catch","error","console","log","stringify","length","map","datum","expenseDollars","Math","floor","expenses","expenseCents","cents","round","month","year","dogsTotalCount","dogsSixtyDaysCount","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { getData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AnimalControlReport = () => {\n\n    const [state, setState] = useState({\n        data: [],\n        errorMessage: \"\",\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    useEffect(() => {\n        if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n            getData(\"/animal-control-report\")\n                .then(({ target }) => {\n                    if (target.status === 200) {\n                        setState({ ...state, data: JSON.parse(target.response) });\n                    } else {\n                        setState({ ...state, errorMessage: target.response });\n                    }\n                })\n                .catch(error => {\n                    console.log(error);\n                    setState({ ...state, errorMessage: JSON.stringify(error) });\n                })\n        }\n    }, [state.cookie]);\n    return (\n        <>\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <main className=\"container\">\n                <h1>Animal Control Report</h1>\n                <table>\n                    <thead>\n                        <td>Month</td>\n                        <td>Year</td>\n                        <td>Total Dogs Count</td>\n                        <td>Dogs 60 Days Count</td>\n                        <td>Expenses</td>\n                    </thead>\n                    <tbody>\n                        {state.data.length && (\n                            state.data.map(datum => {\n                                const expenseDollars = Math.floor(datum.expenses);\n                                const expenseCents = (() => {\n                                    const cents = Math.round((datum.expenses % 1) * 100);\n                                    return cents < 10 ? \"0\" + cents : cents;\n                                })();\n\n                                return (\n                                    <tr>\n                                        <td>{datum.month}</td>\n                                        <td>{datum.year}</td>\n                                        <td>{datum.dogsTotalCount}</td>\n                                        <td>{datum.dogsSixtyDaysCount}</td>\n                                        <td>${expenseDollars}.{expenseCents}</td>\n                                    </tr>\n                                )\n                            })\n                        )}\n                    </tbody>\n                </table>\n\n                {\n                    state.errorMessage && (\n                        <div styles={{ color: \"red\" }}>{state.errorMessage}</div>\n                    )\n                }\n            </main>\n        </>\n    );\n}\n\nexport default AnimalControlReport;"]},"metadata":{},"sourceType":"module"}