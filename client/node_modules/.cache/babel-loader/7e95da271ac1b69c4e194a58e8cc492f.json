{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{getData}from\"../services/api\";import{isLoggedIn}from\"../services/auth\";import{NavLinks}from\"../components\";function getMonthName(monthNum){switch(monthNum){case 0:return\"January\";case 1:return\"February\";case 2:return\"March\";case 3:return\"April\";case 4:return\"May\";case 5:return\"June\";case 6:return\"July\";case 7:return\"August\";case 8:return\"September\";case 9:return\"October\";case 10:return\"November\";case 11:return\"December\";default:return\"month\";}}function GetMonthOffset(offset){var today=new Date();today.setMonth(today.getMonth()+offset);return getMonthName(today.getMonth())+\" \"+today.getFullYear();}var MonthlyAdoptionReport=function MonthlyAdoptionReport(){var _useState=useState({data:[],errorMessage:\"\",loginRedirect:false,cookie:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];// check auth\nuseEffect(function(){var cookie=isLoggedIn();if(cookie.hasOwnProperty(\"isTrustedVolunteer\")&&cookie.isTrustedVolunteer){setState(_objectSpread(_objectSpread({},state),{},{cookie:cookie}));}/* eslint-disable react-hooks/exhaustive-deps */},[]);useEffect(function(){if(state.cookie.hasOwnProperty(\"isTrustedVolunteer\")&&state.cookie.isTrustedVolunteer){getData(\"/monthly-adoption-report?month=-18\").then(function(_ref){var target=_ref.target;if(target.status===200){setState(_objectSpread(_objectSpread({},state),{},{data:JSON.parse(target.response)}));}else{setState(_objectSpread(_objectSpread({},state),{},{errorMessage:target.response}));}}).catch(function(error){console.log(error);setState(_objectSpread(_objectSpread({},state),{},{errorMessage:JSON.stringify(error)}));});}},[state.cookie]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLinks,{isTrustedVolunteer:state.cookie.isTrustedVolunteer}),/*#__PURE__*/React.createElement(\"h1\",null,\"Monthly Adoption Report\"),/*#__PURE__*/React.createElement(\"p\",null,GetMonthOffset(-18)),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Breed\"),/*#__PURE__*/React.createElement(\"td\",null,\"Surrender Count\"),/*#__PURE__*/React.createElement(\"td\",null,\"Adoption Count\"),/*#__PURE__*/React.createElement(\"td\",null,\"Expenses\"),/*#__PURE__*/React.createElement(\"td\",null,\"Adoption Fees\"),/*#__PURE__*/React.createElement(\"td\",null,\"Profit\")),/*#__PURE__*/React.createElement(\"tbody\",null,state.data.length&&state.data.map(function(datum){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,datum.breed),/*#__PURE__*/React.createElement(\"td\",null,datum.SurrenderCount.Float64),/*#__PURE__*/React.createElement(\"td\",null,datum.AdoptionCount.Float64),/*#__PURE__*/React.createElement(\"td\",null,datum.Expenses.Float64),/*#__PURE__*/React.createElement(\"td\",null,datum.AdoptionFees.Float64),/*#__PURE__*/React.createElement(\"td\",null,datum.Profit.Float64));}))),state.errorMessage&&/*#__PURE__*/React.createElement(\"div\",{styles:{color:\"red\"}},state.errorMessage));};export default MonthlyAdoptionReport;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/MonthlyAdoptionReport.js"],"names":["React","useEffect","useState","getData","isLoggedIn","NavLinks","getMonthName","monthNum","GetMonthOffset","offset","today","Date","setMonth","getMonth","getFullYear","MonthlyAdoptionReport","data","errorMessage","loginRedirect","cookie","state","setState","hasOwnProperty","isTrustedVolunteer","then","target","status","JSON","parse","response","catch","error","console","log","stringify","length","map","datum","breed","SurrenderCount","Float64","AdoptionCount","Expenses","AdoptionFees","Profit","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { getData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nfunction getMonthName(monthNum) {\n    switch (monthNum) {\n        case 0: return \"January\"\n        case 1: return \"February\"\n        case 2: return \"March\"\n        case 3: return \"April\"\n        case 4: return \"May\"\n        case 5: return \"June\"\n        case 6: return \"July\"\n        case 7: return \"August\"\n        case 8: return \"September\"\n        case 9: return \"October\"\n        case 10: return \"November\"\n        case 11: return \"December\"\n\n        default: return \"month\"\n\n    }\n}\n\nfunction GetMonthOffset(offset) {\n    let today = new Date()\n    today.setMonth(today.getMonth() + offset)\n\n    return getMonthName(today.getMonth()) + \" \" + today.getFullYear()\n}\n\nconst MonthlyAdoptionReport = () => {\n\n    const [state, setState] = useState({\n        data: [],\n        errorMessage: \"\",\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    useEffect(() => {\n        if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n            getData(\"/monthly-adoption-report?month=-18\")\n                .then(({ target }) => {\n                    if (target.status === 200) {\n\n                        setState({ ...state, data: JSON.parse(target.response) });\n                    } else {\n                        setState({ ...state, errorMessage: target.response });\n                    }\n                })\n                .catch(error => {\n                    console.log(error);\n                    setState({ ...state, errorMessage: JSON.stringify(error) });\n                })\n        }\n    }, [state.cookie]);\n\n    return (\n        <>\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <h1>Monthly Adoption Report</h1>\n            <p>{GetMonthOffset(-18)}</p>\n            <table>\n                <thead>\n                    <td>Breed</td>\n                    <td>Surrender Count</td>\n                    <td>Adoption Count</td>\n                    <td>Expenses</td>\n                    <td>Adoption Fees</td>\n                    <td>Profit</td>\n                </thead>\n                <tbody>\n                    {state.data.length && (\n                        state.data.map(datum => {\n                            return (\n                                <tr>\n                                    <td>{datum.breed}</td>\n                                    <td>{datum.SurrenderCount.Float64}</td>\n                                    <td>{datum.AdoptionCount.Float64}</td>\n                                    <td>{datum.Expenses.Float64}</td>\n                                    <td>{datum.AdoptionFees.Float64}</td>\n                                    <td>{datum.Profit.Float64}</td>\n                                </tr>\n                            )\n                        })\n                    )}\n                </tbody>\n            </table>\n\n            {state.errorMessage && (\n                <div styles={{ color: \"red\" }}>{state.errorMessage}</div>\n            )}\n        </>\n    );\n}\n\nexport default MonthlyAdoptionReport;"]},"metadata":{},"sourceType":"module"}