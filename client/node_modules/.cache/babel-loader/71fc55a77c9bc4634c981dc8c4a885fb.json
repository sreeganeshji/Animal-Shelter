{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Redirect}from\"react-router-dom\";import{getData,sendData}from\"../services/api\";import{isLoggedIn}from\"../services/auth\";import{NavLinks}from\"../components\";var ReviewApplications=function ReviewApplications(){var _useState=useState({loginRedirect:false,cookie:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];// check auth\nuseEffect(function(){var cookie=isLoggedIn();if(cookie.hasOwnProperty(\"isTrustedVolunteer\")&&cookie.isTrustedVolunteer){setState(_objectSpread(_objectSpread({},state),{},{cookie:cookie}));}/* eslint-disable react-hooks/exhaustive-deps */},[]);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),applications=_useState4[0],setApplications=_useState4[1];useEffect(function(){if(state.cookie.hasOwnProperty(\"isTrustedVolunteer\")&&state.cookie.isTrustedVolunteer){getData(\"/application?status=pending\").then(function(_ref){var target=_ref.target;setApplications(JSON.parse(target.response));}).catch(function(error){console.log(error);});}},[state.cookie]);var submitDecision=function submitDecision(applicationId,decision){var updatedApplicationState=decision?\"true\":\"false\";sendData(decision,\"/application/\".concat(applicationId,\"?approve=\").concat(updatedApplicationState),\"PUT\").then(function(_ref2){var target=_ref2.target;if(target.status===200){var remainingApplications=applications.filter(function(application){return application.id!==applicationId;});setApplications(remainingApplications);}}).catch(function(error){console.log(\"Error updating application status: \",error);});};return/*#__PURE__*/React.createElement(React.Fragment,null,state.loginRedirect&&/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/login\",state:{from:\"/review-applications\"}}}),/*#__PURE__*/React.createElement(NavLinks,{isTrustedVolunteer:state.cookie.isTrustedVolunteer}),/*#__PURE__*/React.createElement(\"main\",{class:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Review Applications\"),applications.length?/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"First Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Last Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Street\"),/*#__PURE__*/React.createElement(\"th\",null,\"City\"),/*#__PURE__*/React.createElement(\"th\",null,\"State\"),/*#__PURE__*/React.createElement(\"th\",null,\"Zip\"),/*#__PURE__*/React.createElement(\"th\",null,\"Phone Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Co-Applicant First Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Co-Applicant Last Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Decision\"))),/*#__PURE__*/React.createElement(\"tbody\",null,applications.map(function(application){return/*#__PURE__*/React.createElement(\"tr\",{key:application.id},/*#__PURE__*/React.createElement(\"td\",null,application.applicant.firstName),/*#__PURE__*/React.createElement(\"td\",null,application.applicant.lastName),/*#__PURE__*/React.createElement(\"td\",null,application.applicant.email),/*#__PURE__*/React.createElement(\"td\",null,application.applicant.street),/*#__PURE__*/React.createElement(\"td\",null,application.applicant.city),/*#__PURE__*/React.createElement(\"td\",null,application.applicant.state),/*#__PURE__*/React.createElement(\"td\",null,application.applicant.zip),/*#__PURE__*/React.createElement(\"td\",null,application.applicant.phoneNumber),/*#__PURE__*/React.createElement(\"td\",null,application.coApplicantFirstName),/*#__PURE__*/React.createElement(\"td\",null,application.coApplicantLastName),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){submitDecision(application.id,true);}},\"Approve\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){submitDecision(application.id,false);}},\"Reject\")));}))):/*#__PURE__*/React.createElement(\"h3\",null,\"There are not any applications currently pending review.\")));};export default ReviewApplications;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/ReviewApplications.js"],"names":["React","useEffect","useState","Redirect","getData","sendData","isLoggedIn","NavLinks","ReviewApplications","loginRedirect","cookie","state","setState","hasOwnProperty","isTrustedVolunteer","applications","setApplications","then","target","JSON","parse","response","catch","error","console","log","submitDecision","applicationId","decision","updatedApplicationState","status","remainingApplications","filter","application","id","pathname","from","length","map","applicant","firstName","lastName","email","street","city","zip","phoneNumber","coApplicantFirstName","coApplicantLastName"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\"\n\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst ReviewApplications = () => {\n    const [state, setState] = useState({\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    const [applications, setApplications] = useState([]);\n\n    useEffect(() => {\n        if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n            getData(\"/application?status=pending\")\n                .then(({ target }) => {\n                    setApplications(JSON.parse(target.response));\n                })\n                .catch(error => {\n                    console.log(error);\n                })\n        }\n    }, [state.cookie]);\n\n    const submitDecision = (applicationId, decision) => {\n        const updatedApplicationState = decision ? \"true\" : \"false\";\n        sendData(decision, `/application/${applicationId}?approve=${updatedApplicationState}`, \"PUT\")\n            .then(({ target }) => {\n                if (target.status === 200) {\n                    const remainingApplications = applications.filter(application => {\n                        return application.id !== applicationId;\n                    });\n                    setApplications(remainingApplications);\n                }\n\n            })\n            .catch(error => {\n                console.log(\"Error updating application status: \", error);\n            })\n    }\n\n    return (\n        <>\n            {state.loginRedirect && <Redirect to={{ pathname: \"/login\", state: { from: \"/review-applications\" } }} />}\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <main class=\"container\">\n                <h1>Review Applications</h1>\n                {applications.length ? (\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>First Name</th>\n                                <th>Last Name</th>\n                                <th>Email</th>\n                                <th>Street</th>\n                                <th>City</th>\n                                <th>State</th>\n                                <th>Zip</th>\n                                <th>Phone Number</th>\n                                <th>Co-Applicant First Name</th>\n                                <th>Co-Applicant Last Name</th>\n                                <th>Decision</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {applications.map(application => {\n                                return (\n                                    <tr key={application.id}>\n                                        <td>{application.applicant.firstName}</td>\n                                        <td>{application.applicant.lastName}</td>\n                                        <td>{application.applicant.email}</td>\n                                        <td>{application.applicant.street}</td>\n                                        <td>{application.applicant.city}</td>\n                                        <td>{application.applicant.state}</td>\n                                        <td>{application.applicant.zip}</td>\n                                        <td>{application.applicant.phoneNumber}</td>\n                                        <td>{application.coApplicantFirstName}</td>\n                                        <td>{application.coApplicantLastName}</td>\n                                        <td>\n                                            <button type=\"button\" onClick={() => {\n                                                submitDecision(application.id, true);\n                                            }} >Approve</button>\n                                            <button type=\"button\" onClick={() => {\n                                                submitDecision(application.id, false);\n                                            }} >Reject</button>\n                                        </td>\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n\n                    </table >\n                ) : (<h3>There are not any applications currently pending review.</h3>)\n                }\n            </main>\n        </>\n    );\n}\n\nexport default ReviewApplications;"]},"metadata":{},"sourceType":"module"}