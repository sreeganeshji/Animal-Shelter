{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Redirect}from\"react-router-dom\";import{getData,sendData}from\"../services/api\";import{NavLinks}from\"../components\";var Login=function Login(){var _useState=useState({email:\"\",password:\"\",errorMessage:\"\",redirect:false}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){getData(\"/logout\").then(function(data){setState(_objectSpread(_objectSpread({},state),{},{loginRedirect:true}));}).catch(function(error){console.log(error);});/* eslint-disable react-hooks/exhaustive-deps */},[]);var handleEmailChange=function handleEmailChange(_ref){var target=_ref.target;setState(_objectSpread(_objectSpread({},state),{},{email:target.value}));};var handlePasswordChange=function handlePasswordChange(_ref2){var target=_ref2.target;setState(_objectSpread(_objectSpread({},state),{},{password:target.value}));};var submitForm=function submitForm(form){var email=state.email,password=state.password;if(password&&email.indexOf(\"@\")!==0&&email.length>4){sendData({email:email,password:password},\"/login\").then(function(data){var target=data.target;if(target.status===200){// redirect to Dog Dashboard\nvar volunteer=JSON.parse(target.response);localStorage.setItem(\"volunteerId\",volunteer.id);localStorage.setItem(\"isTrusted\",volunteer.isTrusted);setState(_objectSpread(_objectSpread({},state),{},{redirect:true}));}else{setState(_objectSpread(_objectSpread({},state),{},{errorMessage:target.response}));}}).catch(function(error){setState(_objectSpread(_objectSpread({},state),{},{errorMessage:error}));});}else{if(!password){setState(_objectSpread(_objectSpread({},state),{},{errorMessage:\"Please enter valid password.\"}));}else{setState(_objectSpread(_objectSpread({},state),{},{errorMessage:\"Please enter valid email address.\"}));}}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLinks,{titleOnly:true}),/*#__PURE__*/React.createElement(\"main\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Login\"),/*#__PURE__*/React.createElement(\"form\",{action:\"/login\",method:\"post\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",id:\"email\",name:\"email\",onChange:handleEmailChange,value:state.email,autoComplete:\"username\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",id:\"password\",name:\"password\",onChange:handlePasswordChange,value:state.password,autoComplete:\"current-password\"})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:submitForm},\"Log In\")),state.errorMessage&&/*#__PURE__*/React.createElement(\"div\",{style:{color:\"red\"}},state.errorMessage),state.redirect&&/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/dog-dashboard\",state:{from:\"/login\"}}})));};export default Login;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/Login.js"],"names":["React","useEffect","useState","Redirect","getData","sendData","NavLinks","Login","email","password","errorMessage","redirect","state","setState","then","data","loginRedirect","catch","error","console","log","handleEmailChange","target","value","handlePasswordChange","submitForm","form","indexOf","length","status","volunteer","JSON","parse","response","localStorage","setItem","id","isTrusted","color","pathname","from"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport { getData, sendData } from \"../services/api\";\nimport { NavLinks } from \"../components\";\n\nconst Login = () => {\n    const [state, setState] = useState({\n        email: \"\",\n        password: \"\",\n        errorMessage: \"\",\n        redirect: false\n    });\n\n    useEffect(() => {\n        getData(\"/logout\")\n            .then(data => {\n                setState({ ...state, loginRedirect: true });\n            })\n            .catch(error => {\n                console.log(error);\n            })\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, [])\n\n    const handleEmailChange = ({ target }) => {\n        setState({ ...state, email: target.value });\n    }\n\n    const handlePasswordChange = ({ target }) => {\n        setState({ ...state, password: target.value });\n    }\n\n    const submitForm = form => {\n        const { email, password } = state;\n\n        if (password && email.indexOf(\"@\") !== 0 && email.length > 4) {\n            sendData({ email, password }, \"/login\")\n                .then(data => {\n                    const { target } = data;\n                    if (target.status === 200) {\n                        // redirect to Dog Dashboard\n                        const volunteer = JSON.parse(target.response);\n                        localStorage.setItem(\"volunteerId\", volunteer.id);\n                        localStorage.setItem(\"isTrusted\", volunteer.isTrusted);\n                        setState({ ...state, redirect: true });\n                    } else {\n                        setState({ ...state, errorMessage: target.response })\n                    }\n                })\n                .catch(error => {\n                    setState({ ...state, errorMessage: error })\n                });\n        } else {\n            if (!password) {\n                setState({ ...state, errorMessage: \"Please enter valid password.\" })\n            } else {\n                setState({ ...state, errorMessage: \"Please enter valid email address.\" })\n            }\n        }\n    }\n    return (\n        <>\n            <NavLinks titleOnly={true} />\n            <main className=\"container\">\n                <h1>Login</h1>\n\n                <form action=\"/login\" method=\"post\">\n\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"email\">Email:</label>\n                        <input type=\"email\" id=\"email\" name=\"email\" onChange={handleEmailChange} value={state.email} autoComplete=\"username\" />\n                    </div>\n\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"password\">Password:</label>\n                        <input type=\"password\" id=\"password\" name=\"password\" onChange={handlePasswordChange} value={state.password} autoComplete=\"current-password\" />\n                    </div>\n\n                    <button type=\"button\" onClick={submitForm}>Log In</button>\n\n                </form>\n                {state.errorMessage && <div style={{ color: \"red\" }}>{state.errorMessage}</div>}\n                {state.redirect && <Redirect to={{ pathname: \"/dog-dashboard\", state: { from: \"/login\" } }} />}\n            </main>\n        </>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}