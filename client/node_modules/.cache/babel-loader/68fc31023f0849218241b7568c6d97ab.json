{"ast":null,"code":"var _jsxFileName = \"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/Login.js\";\nimport React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { sendData } from \"../services/api\";\n\nconst Login = () => {\n  const [state, setState] = useState({\n    email: \"\",\n    password: \"\",\n    errorMessage: \"\",\n    redirect: false\n  });\n\n  const handleEmailChange = ({\n    target\n  }) => {\n    setState({ ...state,\n      email: target.value\n    });\n  };\n\n  const handlePasswordChange = ({\n    target\n  }) => {\n    setState({ ...state,\n      password: target.value\n    });\n  };\n\n  const submitForm = form => {\n    const {\n      email,\n      password\n    } = state;\n\n    if (password && email.indexOf(\"@\") !== 0 && email.length > 4) {\n      sendData({\n        email,\n        password\n      }, \"/login\").then(data => {\n        const {\n          target\n        } = data;\n\n        if (target.status === 200) {\n          // redirect to Dog Dashboard\n          const volunteer = JSON.parse(target.response);\n          localStorage.setItem(\"volunteerId\", volunteer.id);\n          localStorage.setItem(\"isTrusted\", volunteer.isTrusted);\n          setState({ ...state,\n            redirect: true\n          });\n        } else {\n          setState({ ...state,\n            errorMessage: target.response\n          });\n        }\n      }).catch(error => {\n        setState({ ...state,\n          errorMessage: error\n        });\n      });\n    } else {\n      if (!password) {\n        setState({ ...state,\n          errorMessage: \"Please enter valid password.\"\n        });\n      } else {\n        setState({ ...state,\n          errorMessage: \"Please enter valid email address.\"\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n    action: \"/login\",\n    method: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    onChange: handleEmailChange,\n    value: state.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    or: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, \"Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    onChange: handlePasswordChange,\n    value: state.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: submitForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, \"Log In\")), state.errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 36\n    }\n  }, state.errorMessage), state.redirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: \"/dog-dashboard\",\n      state: {\n        from: \"/login\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 32\n    }\n  }));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/Login.js"],"names":["React","useState","Redirect","sendData","Login","state","setState","email","password","errorMessage","redirect","handleEmailChange","target","value","handlePasswordChange","submitForm","form","indexOf","length","then","data","status","volunteer","JSON","parse","response","localStorage","setItem","id","isTrusted","catch","error","color","pathname","from"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport { sendData } from \"../services/api\";\n\nconst Login = () => {\n    const [state, setState] = useState({\n        email: \"\",\n        password: \"\",\n        errorMessage: \"\",\n        redirect: false\n    });\n\n    const handleEmailChange = ({ target }) => {\n        setState({ ...state, email: target.value });\n    }\n\n    const handlePasswordChange = ({ target }) => {\n        setState({ ...state, password: target.value });\n    }\n\n    const submitForm = form => {\n        const { email, password } = state;\n\n        if (password && email.indexOf(\"@\") !== 0 && email.length > 4) {\n            sendData({ email, password }, \"/login\")\n                .then(data => {\n                    const { target } = data;\n                    if (target.status === 200) {\n                        // redirect to Dog Dashboard\n                        const volunteer = JSON.parse(target.response);\n                        localStorage.setItem(\"volunteerId\", volunteer.id);\n                        localStorage.setItem(\"isTrusted\", volunteer.isTrusted);\n                        setState({ ...state, redirect: true });\n                    } else {\n                        setState({ ...state, errorMessage: target.response })\n                    }\n                })\n                .catch(error => {\n                    setState({ ...state, errorMessage: error })\n                });\n        } else {\n            if (!password) {\n                setState({ ...state, errorMessage: \"Please enter valid password.\" })\n            } else {\n                setState({ ...state, errorMessage: \"Please enter valid email address.\" })\n            }\n        }\n    }\n    return (\n        <>\n            <h1>Login</h1>\n\n            <form action=\"/login\" method=\"post\">\n\n                <div className=\"form-unit\">\n                    <label htmlFor=\"email\">Email:</label>\n                    <input type=\"email\" id=\"email\" name=\"email\" onChange={handleEmailChange} value={state.email} />\n                </div>\n\n                <div className=\"form-unit\">\n                    <label or=\"password\">Password:</label>\n                    <input type=\"password\" id=\"password\" name=\"password\" onChange={handlePasswordChange} value={state.password} />\n                </div>\n\n                <button type=\"button\" onClick={submitForm}>Log In</button>\n\n            </form>\n            {state.errorMessage && <div style={{ color: \"red\" }}>{state.errorMessage}</div>}\n            {state.redirect && <Redirect to={{ pathname: \"/dog-dashboard\", state: { from: \"/login\" } }} />}\n        </>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}