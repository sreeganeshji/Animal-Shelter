{"ast":null,"code":"var _jsxFileName = \"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AnimalControlDrillDownReport.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport { getData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AnimalControlDrillDownReport = () => {\n  const [state, setState] = useState({\n    errorMessage: \"\",\n    cookie: {},\n    backRedirect: false\n  });\n  const [surrenderedData, setSurrenderedData] = useState([]);\n  const [adoptedData, setAdoptedData] = useState([]);\n  const {\n    monthAndYear\n  } = useParams();\n  const [month, year] = monthAndYear.split(\"-\"); // check auth\n\n  useEffect(() => {\n    const cookie = isLoggedIn();\n\n    if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n      setState({ ...state,\n        cookie\n      });\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n\n  }, []);\n  useEffect(() => {\n    if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n      const startMonth = (() => {\n        switch (month) {\n          case \"January\":\n            return \"01\";\n\n          case \"February\":\n            return \"02\";\n\n          case \"March\":\n            return \"03\";\n\n          case \"April\":\n            return \"04\";\n\n          case \"May\":\n            return \"05\";\n\n          case \"June\":\n            return \"06\";\n\n          case \"July\":\n            return \"07\";\n\n          case \"August\":\n            return \"08\";\n\n          case \"September\":\n            return \"09\";\n\n          case \"October\":\n            return \"10\";\n\n          case \"November\":\n            return \"11\";\n\n          case \"December\":\n            return \"12\";\n\n          default:\n            throw new Error(\"Invalid month provided\");\n        }\n      })();\n\n      const endMonth = (() => {\n        switch (month) {\n          case \"January\":\n            return \"02\";\n\n          case \"February\":\n            return \"03\";\n\n          case \"March\":\n            return \"04\";\n\n          case \"April\":\n            return \"05\";\n\n          case \"May\":\n            return \"06\";\n\n          case \"June\":\n            return \"07\";\n\n          case \"July\":\n            return \"08\";\n\n          case \"August\":\n            return \"09\";\n\n          case \"September\":\n            return \"10\";\n\n          case \"October\":\n            return \"11\";\n\n          case \"November\":\n            return \"12\";\n\n          case \"December\":\n            return \"01\";\n\n          default:\n            throw new Error(\"Invalid month provided\");\n        }\n      })();\n\n      const endYear = (() => {\n        return month === \"December\" ? year + 1 : year;\n      })();\n\n      getData(`/animal-control-report-drilldown-surrendered?startDate=${year + \"-\" + startMonth + \"-01\"}&endDate=${endYear + \"-\" + endMonth + \"-01\"}`).then(({\n        target\n      }) => {\n        const surrenderedData = JSON.parse(target.response);\n\n        if (target.status === 200 && surrenderedData.length) {\n          setSurrenderedData(surrenderedData);\n        }\n      }).catch(error => {\n        console.log(error);\n        setState({ ...state,\n          errorMessage: error\n        });\n      });\n      getData(`/animal-control-report-drilldown-adopted?startDate=${year + \"-\" + startMonth + \"-01\"}&endDate=${endYear + \"-\" + endMonth + \"-01\"}`).then(({\n        target\n      }) => {\n        const adoptedData = JSON.parse(target.response);\n\n        if (target.status === 200 && adoptedData.length) {\n          setAdoptedData(adoptedData);\n        }\n      }).catch(error => {\n        console.log(error);\n        setState({ ...state,\n          errorMessage: error\n        });\n      });\n    }\n  }, [state.cookie]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, state.backRedirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: \"/animal-control-report\",\n      state: {\n        from: `/animal-control-report/${month}-${year}`\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 36\n    }\n  }), /*#__PURE__*/React.createElement(NavLinks, {\n    isTrustedVolunteer: state.cookie.isTrustedVolunteer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, \"Animal Control Drill Down Report\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setState({ ...state,\n      backRedirect: true\n    }),\n    className: \"back\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, \"Back to Animal Control Report\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, \"Dogs Surrendered\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, \"Dog ID\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, \"Breed\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }, \"Sex\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \"Alteration Status\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, \"Microchip ID\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, \"Surrender Date\")), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }, surrenderedData.length > 0 && surrenderedData.map(dog => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 41\n      }\n    }, dog.dogId), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 41\n      }\n    }, dog.breed), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 41\n      }\n    }, dog.sex), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 41\n      }\n    }, dog.alterationStatus ? \"Altered\" : \"Not yet altered\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 41\n      }\n    }, dog.microchipId || \"None recorded\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 41\n      }\n    }, dog.surrenderDate));\n  }))), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, \"Dogs Adopted\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, \"Dog ID\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, \"Breed\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, \"Sex\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, \"Alteration Status\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, \"Microchip ID\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, \"Surrender Date\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }, \"Days in Rescue\")), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, adoptedData.length > 0 && adoptedData.map(dog => {\n    console.log(\"running\");\n    const surrendered = new Date(dog.surrenderDate);\n    const adopted = new Date(dog.adoptionDate);\n    const daysInShelter = Math.round((adopted - surrendered) / (1000 * 60 * 60 * 24));\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 41\n      }\n    }, dog.dogId), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 41\n      }\n    }, dog.breed), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 41\n      }\n    }, dog.sex), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 41\n      }\n    }, dog.alterationStatus ? \"Altered\" : \"Not yet altered\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 41\n      }\n    }, dog.microchipId || \"None recorded\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 41\n      }\n    }, dog.surrenderDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 41\n      }\n    }, daysInShelter));\n  }))), state.errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }\n  }, state.errorMessage)));\n};\n\nexport default AnimalControlDrillDownReport;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AnimalControlDrillDownReport.js"],"names":["React","useEffect","useState","Redirect","useParams","getData","isLoggedIn","NavLinks","AnimalControlDrillDownReport","state","setState","errorMessage","cookie","backRedirect","surrenderedData","setSurrenderedData","adoptedData","setAdoptedData","monthAndYear","month","year","split","hasOwnProperty","isTrustedVolunteer","startMonth","Error","endMonth","endYear","then","target","JSON","parse","response","status","length","catch","error","console","log","pathname","from","map","dog","dogId","breed","sex","alterationStatus","microchipId","surrenderDate","surrendered","Date","adopted","adoptionDate","daysInShelter","Math","round"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\n\nimport { getData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AnimalControlDrillDownReport = () => {\n\n    const [state, setState] = useState({\n        errorMessage: \"\",\n        cookie: {},\n        backRedirect: false\n    });\n\n    const [surrenderedData, setSurrenderedData] = useState([]);\n\n    const [adoptedData, setAdoptedData] = useState([]);\n\n    const { monthAndYear } = useParams();\n\n    const [month, year] = monthAndYear.split(\"-\");\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    useEffect(() => {\n        if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n            const startMonth = (() => {\n                switch (month) {\n                    case \"January\":\n                        return \"01\";\n                    case \"February\":\n                        return \"02\";\n                    case \"March\":\n                        return \"03\";\n                    case \"April\":\n                        return \"04\";\n                    case \"May\":\n                        return \"05\";\n                    case \"June\":\n                        return \"06\";\n                    case \"July\":\n                        return \"07\";\n                    case \"August\":\n                        return \"08\";\n                    case \"September\":\n                        return \"09\";\n                    case \"October\":\n                        return \"10\";\n                    case \"November\":\n                        return \"11\";\n                    case \"December\":\n                        return \"12\";\n                    default:\n                        throw new Error(\"Invalid month provided\");\n                }\n            })();\n            const endMonth = (() => {\n                switch (month) {\n                    case \"January\":\n                        return \"02\";\n                    case \"February\":\n                        return \"03\";\n                    case \"March\":\n                        return \"04\";\n                    case \"April\":\n                        return \"05\";\n                    case \"May\":\n                        return \"06\";\n                    case \"June\":\n                        return \"07\";\n                    case \"July\":\n                        return \"08\";\n                    case \"August\":\n                        return \"09\";\n                    case \"September\":\n                        return \"10\";\n                    case \"October\":\n                        return \"11\";\n                    case \"November\":\n                        return \"12\";\n                    case \"December\":\n                        return \"01\";\n                    default:\n                        throw new Error(\"Invalid month provided\");\n                }\n            })();\n\n            const endYear = (() => {\n                return month === \"December\" ? year + 1 : year;\n            })();\n\n            getData(`/animal-control-report-drilldown-surrendered?startDate=${year + \"-\" + startMonth + \"-01\"}&endDate=${endYear + \"-\" + endMonth + \"-01\"}`)\n                .then(({ target }) => {\n                    const surrenderedData = JSON.parse(target.response);\n                    if (target.status === 200 && surrenderedData.length) {\n                        setSurrenderedData(surrenderedData);\n                    }\n                })\n                .catch(error => {\n                    console.log(error);\n                    setState({ ...state, errorMessage: error });\n                });\n\n            getData(`/animal-control-report-drilldown-adopted?startDate=${year + \"-\" + startMonth + \"-01\"}&endDate=${endYear + \"-\" + endMonth + \"-01\"}`)\n                .then(({ target }) => {\n                    const adoptedData = JSON.parse(target.response);\n                    if (target.status === 200 && adoptedData.length) {\n                        setAdoptedData(adoptedData);\n                    }\n                })\n                .catch(error => {\n                    console.log(error);\n                    setState({ ...state, errorMessage: error });\n                })\n        }\n    }, [state.cookie]);\n\n    return (\n        <>\n            {state.backRedirect && <Redirect to={{ pathname: \"/animal-control-report\", state: { from: `/animal-control-report/${month}-${year}` } }} />}\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <main className=\"container\">\n                <h1>Animal Control Drill Down Report</h1>\n                <button type=\"button\" onClick={() => setState({ ...state, backRedirect: true })} className=\"back\">Back to Animal Control Report</button>\n                <h3>Dogs Surrendered</h3>\n                <table>\n                    <thead>\n                        <td>Dog ID</td>\n                        <td>Breed</td>\n                        <td>Sex</td>\n                        <td>Alteration Status</td>\n                        <td>Microchip ID</td>\n                        <td>Surrender Date</td>\n                    </thead>\n                    <tbody>\n                        {surrenderedData.length > 0 && (\n                            surrenderedData.map(dog => {\n\n                                return (\n                                    <tr>\n                                        <td>{dog.dogId}</td>\n                                        <td>{dog.breed}</td>\n                                        <td>{dog.sex}</td>\n                                        <td>{dog.alterationStatus ? \"Altered\" : \"Not yet altered\"}</td>\n                                        <td>{dog.microchipId || \"None recorded\"}</td>\n                                        <td>{dog.surrenderDate}</td>\n                                    </tr>\n                                )\n                            })\n                        )}\n                    </tbody>\n                </table>\n\n                <h3>Dogs Adopted</h3>\n                <table>\n                    <thead>\n                        <td>Dog ID</td>\n                        <td>Breed</td>\n                        <td>Sex</td>\n                        <td>Alteration Status</td>\n                        <td>Microchip ID</td>\n                        <td>Surrender Date</td>\n                        <td>Days in Rescue</td>\n                    </thead>\n                    <tbody>\n                        {adoptedData.length > 0 && (\n                            adoptedData.map(dog => {\n                                console.log(\"running\")\n                                const surrendered = new Date(dog.surrenderDate);\n                                const adopted = new Date(dog.adoptionDate);\n                                const daysInShelter = Math.round((adopted - surrendered) / (1000 * 60 * 60 * 24));\n                                return (\n                                    <tr>\n                                        <td>{dog.dogId}</td>\n                                        <td>{dog.breed}</td>\n                                        <td>{dog.sex}</td>\n                                        <td>{dog.alterationStatus ? \"Altered\" : \"Not yet altered\"}</td>\n                                        <td>{dog.microchipId || \"None recorded\"}</td>\n                                        <td>{dog.surrenderDate}</td>\n                                        <td>{daysInShelter}</td>\n                                    </tr>\n                                )\n                            })\n                        )}\n                    </tbody>\n                </table>\n\n                {\n                    state.errorMessage && (\n                        <div className=\"error-message\">{state.errorMessage}</div>\n                    )\n                }\n            </main>\n        </>\n    );\n}\n\nexport default AnimalControlDrillDownReport;"]},"metadata":{},"sourceType":"module"}