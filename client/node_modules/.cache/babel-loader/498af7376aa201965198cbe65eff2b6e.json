{"ast":null,"code":"var _jsxFileName = \"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/MonthlyAdoptionReport.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { getData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nfunction getMonthName(monthNum) {\n  switch (monthNum) {\n    case 0:\n      return \"January\";\n\n    case 1:\n      return \"February\";\n\n    case 2:\n      return \"March\";\n\n    case 3:\n      return \"April\";\n\n    case 4:\n      return \"May\";\n\n    case 5:\n      return \"June\";\n\n    case 6:\n      return \"July\";\n\n    case 7:\n      return \"August\";\n\n    case 8:\n      return \"September\";\n\n    case 9:\n      return \"October\";\n\n    case 10:\n      return \"November\";\n\n    case 11:\n      return \"December\";\n\n    default:\n      return \"month\";\n  }\n}\n\nfunction GetMonthOffset(offset) {\n  let today = new Date();\n  today.setMonth(today.getMonth() + offset);\n  return getMonthName(today.getMonth()) + \" \" + today.getFullYear();\n}\n\nconst MonthlyAdoptionReport = () => {\n  const [state, setState] = useState({\n    data: [],\n    errorMessage: \"\",\n    loginRedirect: false,\n    cookie: {}\n  }); // check auth\n\n  useEffect(() => {\n    const cookie = isLoggedIn();\n\n    if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n      setState({ ...state,\n        cookie\n      });\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n\n  }, []);\n  useEffect(() => {\n    var i = 0;\n\n    for (i = -11; i <= -10; i++) {\n      UpdateTables(i);\n    }\n  }, [state.cookie]);\n\n  function UpdateTables(ind) {\n    window.alert(\"called with\" + ind.toString()); // if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n\n    getData(\"/monthly-adoption-report?month=-10\").then(({\n      target\n    }) => {\n      if (target.status === 200) {\n        let dataDict = state.data;\n        dataDict = [...dataDict, {\n          \"10\": JSON.parse(target.response)\n        }];\n        setState({ ...state,\n          data: dataDict\n        });\n      } else {\n        setState({ ...state,\n          errorMessage: target.response\n        });\n      }\n    }).catch(error => {\n      console.log(error);\n      setState({ ...state,\n        errorMessage: JSON.stringify(error)\n      });\n    }); // }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, \"Monthly Adoption Report\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, GetMonthOffset(-18)), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"Breed\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, \"Surrender Count\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"Adoption Count\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, \"Expenses\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, \"Adoption Fees\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, \"Profit\")), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, state.data.length && state.data[\"10\"].map(datum => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 37\n      }\n    }, datum.breed), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 37\n      }\n    }, datum.SurrenderCount.Float64), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 37\n      }\n    }, datum.AdoptionCount.Float64), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 37\n      }\n    }, datum.Expenses.Float64), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 37\n      }\n    }, datum.AdoptionFees.Float64), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 37\n      }\n    }, datum.Profit.Float64));\n  }))), state.errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n    styles: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, state.errorMessage));\n};\n\nexport default MonthlyAdoptionReport;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/MonthlyAdoptionReport.js"],"names":["React","useEffect","useState","getData","isLoggedIn","NavLinks","getMonthName","monthNum","GetMonthOffset","offset","today","Date","setMonth","getMonth","getFullYear","MonthlyAdoptionReport","state","setState","data","errorMessage","loginRedirect","cookie","hasOwnProperty","isTrustedVolunteer","i","UpdateTables","ind","window","alert","toString","then","target","status","dataDict","JSON","parse","response","catch","error","console","log","stringify","length","map","datum","breed","SurrenderCount","Float64","AdoptionCount","Expenses","AdoptionFees","Profit","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { getData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nfunction getMonthName(monthNum) {\n    switch (monthNum) {\n        case 0: return \"January\"\n        case 1: return \"February\"\n        case 2: return \"March\"\n        case 3: return \"April\"\n        case 4: return \"May\"\n        case 5: return \"June\"\n        case 6: return \"July\"\n        case 7: return \"August\"\n        case 8: return \"September\"\n        case 9: return \"October\"\n        case 10: return \"November\"\n        case 11: return \"December\"\n\n        default: return \"month\"\n\n    }\n}\n\nfunction GetMonthOffset(offset) {\n    let today = new Date()\n    today.setMonth(today.getMonth() + offset)\n\n    return getMonthName(today.getMonth()) + \" \" + today.getFullYear()\n}\n\nconst MonthlyAdoptionReport = () => {\n\n    const [state, setState] = useState({\n        data: [],\n        errorMessage: \"\",\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    useEffect(() => {\n        var i =0;\n        for ( i = -11; i <= -10; i++ )\n        {\n            UpdateTables(i)\n        }\n\n    }, [state.cookie]);\n\n    function UpdateTables(ind) {\n        window.alert(\"called with\"+ind.toString())\n        // if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n        getData(\"/monthly-adoption-report?month=-10\")\n            .then(({ target }) => {\n                if (target.status === 200) {\n\n                    let dataDict = state.data\n                    dataDict = [...dataDict,{\"10\":JSON.parse(target.response)}]\n\n\n                    setState({ ...state, data: dataDict });\n                } else {\n                    setState({ ...state, errorMessage: target.response });\n                }\n            })\n            .catch(error => {\n                console.log(error);\n                setState({ ...state, errorMessage: JSON.stringify(error) });\n            })\n        // }\n    }\n\n    return (\n        <>\n            {/*<NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />*/}\n            <h1>Monthly Adoption Report</h1>\n            <p>{GetMonthOffset(-18)}</p>\n            <table>\n                <thead>\n                    <td>Breed</td>\n                    <td>Surrender Count</td>\n                    <td>Adoption Count</td>\n                    <td>Expenses</td>\n                    <td>Adoption Fees</td>\n                    <td>Profit</td>\n                </thead>\n                <tbody>\n                    {state.data.length && (\n                        state.data[\"10\"].map(datum => {\n                            return (\n                                <tr>\n                                    <td>{datum.breed}</td>\n                                    <td>{datum.SurrenderCount.Float64}</td>\n                                    <td>{datum.AdoptionCount.Float64}</td>\n                                    <td>{datum.Expenses.Float64}</td>\n                                    <td>{datum.AdoptionFees.Float64}</td>\n                                    <td>{datum.Profit.Float64}</td>\n                                </tr>\n                            )\n                        })\n                    )}\n                </tbody>\n            </table>\n\n            {state.errorMessage && (\n                <div styles={{ color: \"red\" }}>{state.errorMessage}</div>\n            )}\n        </>\n    );\n}\n\nexport default MonthlyAdoptionReport;"]},"metadata":{},"sourceType":"module"}