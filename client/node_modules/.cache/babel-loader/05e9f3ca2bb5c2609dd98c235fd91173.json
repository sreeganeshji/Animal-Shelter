{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{getData}from\"../services/api\";import{isLoggedIn}from\"../services/auth\";import{NavLinks}from\"../components\";function getMonthName(monthNum){switch(monthNum){case 0:return\"January\";case 1:return\"February\";case 2:return\"March\";case 3:return\"April\";case 4:return\"May\";case 5:return\"June\";case 6:return\"July\";case 7:return\"August\";case 8:return\"September\";case 9:return\"October\";case 10:return\"November\";case 11:return\"December\";default:return\"month\";}}function GetMonthOffset(offset){var today=new Date();today.setMonth(today.getMonth()+offset);return getMonthName(today.getMonth())+\" \"+today.getFullYear();}var MonthlyAdoptionReport=function MonthlyAdoptionReport(){var _useState=useState({data:{},errorMessage:\"\",loginRedirect:false,cookie:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];// check auth\nuseEffect(function(){var cookie=isLoggedIn();if(cookie.hasOwnProperty(\"isTrustedVolunteer\")&&cookie.isTrustedVolunteer){setState(_objectSpread(_objectSpread({},state),{},{cookie:cookie}));}/* eslint-disable react-hooks/exhaustive-deps */},[]);useEffect(function(){var i=0;for(i=-11;i<=0;i++){UpdateTables(i);}},[state.cookie]);function UpdateTables(ind){if(state.cookie.hasOwnProperty(\"isTrustedVolunteer\")&&state.cookie.isTrustedVolunteer){getData(\"/monthly-adoption-report?month=\"+ind).then(function(_ref){var target=_ref.target;if(target.status===200){var dataDict=state.data;dataDict[ind]=JSON.parse(target.response);setState(_objectSpread(_objectSpread({},state),{},{data:dataDict}));}else{setState(_objectSpread(_objectSpread({},state),{},{errorMessage:target.response}));}}).catch(function(error){console.log(error);setState(_objectSpread(_objectSpread({},state),{},{errorMessage:JSON.stringify(error)}));});}}function getTableValues(){var indices=[];var i=0;for(i=-11;i<=0;i++){indices.push(i);}return indices.map(function(indx){if(indx in state.data){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h3\",null,GetMonthOffset(indx))),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null)),state.data[indx].map(function(datum){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,datum.breed),/*#__PURE__*/React.createElement(\"td\",null,datum.SurrenderCount.Float64),/*#__PURE__*/React.createElement(\"td\",null,datum.AdoptionCount.Float64),/*#__PURE__*/React.createElement(\"td\",null,datum.Expenses.Float64/100),/*#__PURE__*/React.createElement(\"td\",null,datum.AdoptionFees.Float64/100),/*#__PURE__*/React.createElement(\"td\",null,datum.Profit.Float64/100));}));}});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLinks,{isTrustedVolunteer:state.cookie.isTrustedVolunteer}),/*#__PURE__*/React.createElement(\"h1\",null,\"Monthly Adoption Report\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Month\"),/*#__PURE__*/React.createElement(\"td\",null,\"Breed\"),/*#__PURE__*/React.createElement(\"td\",null,\"Surrender Count\"),/*#__PURE__*/React.createElement(\"td\",null,\"Adoption Count\"),/*#__PURE__*/React.createElement(\"td\",null,\"Expenses\"),/*#__PURE__*/React.createElement(\"td\",null,\"Adoption Fees\"),/*#__PURE__*/React.createElement(\"td\",null,\"Profit\")),/*#__PURE__*/React.createElement(\"tbody\",null,getTableValues())),state.errorMessage&&/*#__PURE__*/React.createElement(\"div\",{styles:{color:\"red\"}},state.errorMessage));};export default MonthlyAdoptionReport;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/MonthlyAdoptionReport.js"],"names":["React","useEffect","useState","getData","isLoggedIn","NavLinks","getMonthName","monthNum","GetMonthOffset","offset","today","Date","setMonth","getMonth","getFullYear","MonthlyAdoptionReport","data","errorMessage","loginRedirect","cookie","state","setState","hasOwnProperty","isTrustedVolunteer","i","UpdateTables","ind","then","target","status","dataDict","JSON","parse","response","catch","error","console","log","stringify","getTableValues","indices","push","map","indx","datum","breed","SurrenderCount","Float64","AdoptionCount","Expenses","AdoptionFees","Profit","color"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\n\nimport {getData} from \"../services/api\";\nimport {isLoggedIn} from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nfunction getMonthName(monthNum) {\n    switch (monthNum) {\n        case 0: return \"January\"\n        case 1: return \"February\"\n        case 2: return \"March\"\n        case 3: return \"April\"\n        case 4: return \"May\"\n        case 5: return \"June\"\n        case 6: return \"July\"\n        case 7: return \"August\"\n        case 8: return \"September\"\n        case 9: return \"October\"\n        case 10: return \"November\"\n        case 11: return \"December\"\n\n        default: return \"month\"\n\n    }\n}\n\nfunction GetMonthOffset(offset) {\n    let today = new Date()\n    today.setMonth(today.getMonth() + offset)\n\n    return getMonthName(today.getMonth()) + \" \" + today.getFullYear()\n}\n\nconst MonthlyAdoptionReport = () => {\n\n    const [state, setState] = useState({\n        data: {},\n        errorMessage: \"\",\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    useEffect(() => {\n        var i =0;\n        for ( i = -11; i <= 0; i++ )\n        {\n            UpdateTables(i)\n        }\n\n    }, [state.cookie]);\n\n    function UpdateTables(ind) {\n\n        if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n        getData(\"/monthly-adoption-report?month=\"+ind)\n            .then(({ target }) => {\n                if (target.status === 200) {\n\n                    const dataDict = state.data\n                    dataDict[ind] =JSON.parse(target.response)\n\n                    setState({ ...state, data:dataDict});\n\n                } else {\n                    setState({ ...state, errorMessage: target.response });\n                }\n            })\n            .catch(error => {\n                console.log(error);\n                setState({ ...state, errorMessage: JSON.stringify(error) });\n            })\n        }\n    }\n\n    function getTableValues(){\n        var indices = [];\n        var i = 0;\n        for (i = -11;i<=0; i++)\n        {\n            indices.push(i);\n        }\n\n        return (\n                indices.map(indx=>\n                    { if(indx in state.data) {\n\n\n                    return(\n                        <>\n                        <tr>\n                            <td>\n                                <h3>{GetMonthOffset(indx)}</h3></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                            {state.data[indx].map(datum =>\n\n                                <tr>\n                                <td></td>\n                                <td>{datum.breed}</td>\n                                <td>{datum.SurrenderCount.Float64}</td>\n                                <td>{datum.AdoptionCount.Float64}</td>\n                                <td>{datum.Expenses.Float64/100}</td>\n                                <td>{datum.AdoptionFees.Float64/100}</td>\n                                <td>{datum.Profit.Float64/100}</td>\n                            </tr>\n\n                    )}\n                        </>\n\n                    )\n\n                        }\n                    }\n\n                )\n\n        )\n    }\n\n    return (\n        <>\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <h1>Monthly Adoption Report</h1>\n\n            <table>\n                <thead>\n                    <td>Month</td>\n                    <td>Breed</td>\n                    <td>Surrender Count</td>\n                    <td>Adoption Count</td>\n                    <td>Expenses</td>\n                    <td>Adoption Fees</td>\n                    <td>Profit</td>\n                </thead>\n                <tbody>\n                {\ngetTableValues()\n                }\n                </tbody>\n            </table>\n\n            {state.errorMessage && (\n                <div styles={{ color: \"red\" }}>{state.errorMessage}</div>\n            )}\n        </>\n    );\n}\n\nexport default MonthlyAdoptionReport;\n\n"]},"metadata":{},"sourceType":"module"}