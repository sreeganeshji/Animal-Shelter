{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Redirect}from\"react-router-dom\";import{getData,sendData}from\"../services/api\";import{isLoggedIn}from\"../services/auth\";import{NavLinks}from\"../components\";var AddApplication=function AddApplication(){var _useState=useState({showModal:false,dashboardRedirect:false,errorMessage:\"\",timeout:-1,applicationId:\"\",loginRedirect:false,cookie:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];// check auth\nuseEffect(function(){var cookie=isLoggedIn();if(cookie.hasOwnProperty(\"isTrustedVolunteer\")&&cookie.isTrustedVolunteer!==null){setState(_objectSpread(_objectSpread({},state),{},{cookie:cookie}));}/* eslint-disable react-hooks/exhaustive-deps */},[]);var _useState3=useState({city:\"\",email:\"\",firstName:\"\",lastName:\"\",phoneNumber:\"\",state:\"\",street:\"\",zip:\"\"}),_useState4=_slicedToArray(_useState3,2),applicant=_useState4[0],setApplicant=_useState4[1];var _useState5=useState({coApplicantFirstName:\"\",coApplicantLastName:\"\",applicantIdFk:\"\",date:\"\",state:\"\"}),_useState6=_slicedToArray(_useState5,2),application=_useState6[0],setApplication=_useState6[1];var updateApplicant=function updateApplicant(attribute){var updatedState=applicant;Object.assign(updatedState,attribute);setApplicant(_objectSpread({},updatedState));};var updateApplication=function updateApplication(attribute){var updatedState=application;Object.assign(updatedState,attribute);setApplication(_objectSpread({},updatedState));};var postApplicant=function postApplicant(){sendData(applicant,\"/applicant\").then(function(_ref){var target=_ref.target;var applicant=JSON.parse(target.response);if(target.status===201&&applicant.email){// show success modal\nsetApplicant(applicant);updateApplication({applicantIdFk:applicant.id});postApplication();}else{console.log(\"error adding application (non-201):\",target.response);setState(_objectSpread(_objectSpread({},state),{},{\"errorMessage\":target.response}));}}).catch(function(error){// show error modal\nconsole.log(\"error adding application (catch):\",error);setState(_objectSpread(_objectSpread({},state),{},{\"errorMessage\":error}));});};var postApplication=function postApplication(){sendData(application,\"/application\").then(function(_ref2){var target=_ref2.target;if(target.status===201){// show success modal\nsetState(_objectSpread(_objectSpread({},state),{},{applicationId:JSON.parse(target.response).id,showModal:true}));}else{console.log(\"error adding application (non-201):\",target.response);setState(_objectSpread(_objectSpread({},state),{},{\"errorMessage\":target.response}));}}).catch(function(error){// show error modal\nconsole.log(\"error adding application (catch):\",error);setState(_objectSpread(_objectSpread({},state),{},{\"errorMessage\":error}));});};var submitApplication=function submitApplication(){if(application.applicantIdFk){postApplication();}else{postApplicant();}};var resetPage=function resetPage(){setApplicant({city:\"\",email:\"\",firstName:\"\",lastName:\"\",phoneNumber:\"\",state:\"\",street:\"\",zip:\"\"});setApplication({coApplicantFirstName:\"\",coApplicantLastName:\"\",applicantIdFk:\"\",date:\"\",state:\"\"});setState({showModal:false,dashboardRedirect:false,errorMessage:\"\",timeout:-1,applicationId:\"\",loginRedirect:false});};return/*#__PURE__*/React.createElement(React.Fragment,null,state.dashboardRedirect&&/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/dog-dashboard\",state:{from:\"/add-dog\"}}}),/*#__PURE__*/React.createElement(NavLinks,{isTrustedVolunteer:state.cookie.isTrustedVolunteer}),/*#__PURE__*/React.createElement(\"main\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Add Application\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Applicant Email Address:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-email\",value:applicant.email,onChange:function onChange(_ref3){var target=_ref3.target;updateApplicant({\"email\":target.value});// debounce for 300 milliseconds\nclearTimeout(state.timeout);setState(_objectSpread(_objectSpread({},state),{},{timeout:setTimeout(function(){// make http call for applicant\ngetData(\"/applicant/\".concat(applicant.email)).then(function(_ref4){var target=_ref4.target;var applicant=JSON.parse(target.response);if(target.status===200&&applicant.email){setApplicant(applicant);updateApplication({applicantIdFk:applicant.id});}}).catch(function(error){console.log(error);});},400)}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Applicant First Name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-first-name\",value:applicant.firstName,onChange:function onChange(_ref5){var target=_ref5.target;return updateApplicant({\"firstName\":target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Applicant Last Name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-last-name\",value:applicant.lastName,onChange:function onChange(_ref6){var target=_ref6.target;return updateApplicant({\"lastName\":target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Street Address:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-stree-address\",value:applicant.street,onChange:function onChange(_ref7){var target=_ref7.target;return updateApplicant({\"street\":target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"City:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-city\",value:applicant.city,onChange:function onChange(_ref8){var target=_ref8.target;return updateApplicant({\"city\":target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"State: (2 Letters)\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-state\",value:applicant.state,onChange:function onChange(_ref9){var target=_ref9.target;return updateApplicant({\"state\":target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Zip Code:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-zip-code\",value:applicant.zip,onChange:function onChange(_ref10){var target=_ref10.target;return updateApplicant({\"zip\":target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Phone Number:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-phone-number\",value:applicant.phoneNumber,onChange:function onChange(_ref11){var target=_ref11.target;return updateApplicant({\"phoneNumber\":target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Co-Applicant First Name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-co-applicant-first-name\",value:applicant.coApplicantFirstName,onChange:function onChange(_ref12){var target=_ref12.target;return updateApplication({\"coApplicantFirstName\":target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Co-Applicant Last Name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"applicant-co-applicant-last-name\",value:applicant.coApplicantLastName,onChange:function onChange(_ref13){var target=_ref13.target;return updateApplication({\"coApplicantLastName\":target.value});}})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:submitApplication},\"Submit Application\")),state.showModal&&/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",overflow:\"hidden\"}},/*#__PURE__*/React.createElement(\"div\",{style:{position:\"fixed\",top:0,right:0,bottom:0,left:0,zIndex:10,backgroundColor:\"black\",opacity:0.5}}),/*#__PURE__*/React.createElement(\"div\",{style:{position:\"fixed\",left:\"50%\",bottom:\"50%\",marginLeft:\"-300px\",marginBottom:\"-150px\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",zIndex:100,height:\"300px\",width:\"600px\",backgroundColor:\"white\"}},/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:\"20px\"}},/*#__PURE__*/React.createElement(\"span\",null,\"Application successfully created.\")),/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:\"20px\"}},/*#__PURE__*/React.createElement(\"span\",null,\"Application #\",state.applicationId)),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"20px\"}},\"Would you like to go to\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:resetPage},\"Add another application\"),/*#__PURE__*/React.createElement(\"span\",{style:{margin:\"20px\"}},\" or \"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setState(_objectSpread(_objectSpread({},state),{},{dashboardRedirect:true}));}},\"Back to Dog Dashboard\"))))));};export default AddApplication;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AddApplication.js"],"names":["React","useEffect","useState","Redirect","getData","sendData","isLoggedIn","NavLinks","AddApplication","showModal","dashboardRedirect","errorMessage","timeout","applicationId","loginRedirect","cookie","state","setState","hasOwnProperty","isTrustedVolunteer","city","email","firstName","lastName","phoneNumber","street","zip","applicant","setApplicant","coApplicantFirstName","coApplicantLastName","applicantIdFk","date","application","setApplication","updateApplicant","attribute","updatedState","Object","assign","updateApplication","postApplicant","then","target","JSON","parse","response","status","id","postApplication","console","log","catch","error","submitApplication","resetPage","pathname","from","value","clearTimeout","setTimeout","display","flexDirection","alignItems","justifyContent","overflow","position","top","right","bottom","left","zIndex","backgroundColor","opacity","marginLeft","marginBottom","height","width","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AddApplication = () => {\n    const [state, setState] = useState({\n        showModal: false,\n        dashboardRedirect: false,\n        errorMessage: \"\",\n        timeout: -1,\n        applicationId: \"\",\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer !== null) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    const [applicant, setApplicant] = useState({\n        city: \"\",\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        phoneNumber: \"\",\n        state: \"\",\n        street: \"\",\n        zip: \"\"\n    });\n\n    const [application, setApplication] = useState({\n        coApplicantFirstName: \"\",\n        coApplicantLastName: \"\",\n        applicantIdFk: \"\",\n        date: \"\",\n        state: \"\"\n    });\n\n    const updateApplicant = (attribute) => {\n        let updatedState = applicant;\n        Object.assign(updatedState, attribute);\n        setApplicant({ ...updatedState });\n    };\n\n    const updateApplication = (attribute) => {\n        let updatedState = application;\n        Object.assign(updatedState, attribute);\n        setApplication({ ...updatedState });\n    };\n\n    const postApplicant = () => {\n        sendData(applicant, `/applicant`)\n            .then(({ target }) => {\n                const applicant = JSON.parse(target.response);\n                if (target.status === 201 && applicant.email) {\n                    // show success modal\n                    setApplicant(applicant)\n                    updateApplication({ applicantIdFk: applicant.id })\n                    postApplication()\n                } else {\n                    console.log(\"error adding application (non-201):\", target.response);\n                    setState({ ...state, \"errorMessage\": target.response });\n                }\n            })\n            .catch(error => {\n                // show error modal\n                console.log(\"error adding application (catch):\", error);\n                setState({ ...state, \"errorMessage\": error });\n            });\n    };\n\n    const postApplication = () => {\n        sendData(application, `/application`)\n            .then(({ target }) => {\n                if (target.status === 201) {\n                    // show success modal\n                    setState({ ...state, applicationId: JSON.parse(target.response).id, showModal: true });\n                } else {\n                    console.log(\"error adding application (non-201):\", target.response);\n                    setState({ ...state, \"errorMessage\": target.response });\n                }\n            })\n            .catch(error => {\n                // show error modal\n                console.log(\"error adding application (catch):\", error);\n                setState({ ...state, \"errorMessage\": error });\n            });\n    };\n\n    const submitApplication = () => {\n        if (application.applicantIdFk) {\n            postApplication();\n        } else {\n            postApplicant();\n        }\n    };\n\n    const resetPage = () => {\n        setApplicant({\n            city: \"\",\n            email: \"\",\n            firstName: \"\",\n            lastName: \"\",\n            phoneNumber: \"\",\n            state: \"\",\n            street: \"\",\n            zip: \"\"\n        });\n\n        setApplication({\n            coApplicantFirstName: \"\",\n            coApplicantLastName: \"\",\n            applicantIdFk: \"\",\n            date: \"\",\n            state: \"\"\n        });\n\n        setState({\n            showModal: false,\n            dashboardRedirect: false,\n            errorMessage: \"\",\n            timeout: -1,\n            applicationId: \"\",\n            loginRedirect: false\n        });\n    }\n\n    return (\n        <>\n            {state.dashboardRedirect && <Redirect to={{ pathname: \"/dog-dashboard\", state: { from: \"/add-dog\" } }} />}\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <main className=\"container\">\n                <h1>Add Application</h1>\n                <form>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Applicant Email Address:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-email\"\n                            value={applicant.email}\n                            onChange={({ target }) => {\n                                updateApplicant({ \"email\": target.value })\n                                // debounce for 300 milliseconds\n                                clearTimeout(state.timeout);\n                                setState({\n                                    ...state, timeout: setTimeout(() => {\n                                        // make http call for applicant\n                                        getData(`/applicant/${applicant.email}`)\n                                            .then(({ target }) => {\n                                                let applicant = JSON.parse(target.response);\n                                                if (target.status === 200 && applicant.email) {\n                                                    setApplicant(applicant);\n                                                    updateApplication({ applicantIdFk: applicant.id })\n                                                }\n                                            })\n                                            .catch(error => {\n                                                console.log(error);\n                                            })\n                                    }, 400)\n                                });\n                            }}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Applicant First Name:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-first-name\"\n                            value={applicant.firstName}\n                            onChange={({ target }) => updateApplicant({ \"firstName\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Applicant Last Name:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-last-name\"\n                            value={applicant.lastName}\n                            onChange={({ target }) => updateApplicant({ \"lastName\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Street Address:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-stree-address\"\n                            value={applicant.street}\n                            onChange={({ target }) => updateApplicant({ \"street\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">City:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-city\"\n                            value={applicant.city}\n                            onChange={({ target }) => updateApplicant({ \"city\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">State: (2 Letters)</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-state\"\n                            value={applicant.state}\n                            onChange={({ target }) => updateApplicant({ \"state\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Zip Code:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-zip-code\"\n                            value={applicant.zip}\n                            onChange={({ target }) => updateApplicant({ \"zip\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Phone Number:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-phone-number\"\n                            value={applicant.phoneNumber}\n                            onChange={({ target }) => updateApplicant({ \"phoneNumber\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Co-Applicant First Name:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-co-applicant-first-name\"\n                            value={applicant.coApplicantFirstName}\n                            onChange={({ target }) => updateApplication({ \"coApplicantFirstName\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Co-Applicant Last Name:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-co-applicant-last-name\"\n                            value={applicant.coApplicantLastName}\n                            onChange={({ target }) => updateApplication({ \"coApplicantLastName\": target.value })}\n                        />\n                    </div>\n                    <button type=\"button\" onClick={submitApplication}>Submit Application</button>\n                </form>\n                {state.showModal && (\n                    <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", overflow: \"hidden\" }}>\n                        <div style={{ position: \"fixed\", top: 0, right: 0, bottom: 0, left: 0, zIndex: 10, backgroundColor: \"black\", opacity: 0.5 }}></div>\n                        <div style={{ position: \"fixed\", left: \"50%\", bottom: \"50%\", marginLeft: \"-300px\", marginBottom: \"-150px\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", zIndex: 100, height: \"300px\", width: \"600px\", backgroundColor: \"white\" }}>\n                            <div style={{ marginBottom: \"20px\" }}>\n                                <span>Application successfully created.</span>\n                            </div>\n                            <div style={{ marginBottom: \"20px\" }}>\n                                <span>Application #{state.applicationId}</span>\n                            </div>\n                            <div style={{ margin: \"20px\" }}>Would you like to go to</div>\n                            <div>\n                                <button onClick={resetPage}>Add another application</button>\n                                <span style={{ margin: \"20px\" }}> or </span>\n                                <button onClick={() => setState({ ...state, dashboardRedirect: true })}>Back to Dog Dashboard</button>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </main>\n        </>\n    )\n\n\n}\n\nexport default AddApplication;"]},"metadata":{},"sourceType":"module"}