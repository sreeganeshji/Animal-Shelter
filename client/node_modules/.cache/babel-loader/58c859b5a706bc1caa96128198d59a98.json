{"ast":null,"code":"var _jsxFileName = \"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AddAdoption.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect, useLocation } from \"react-router-dom\";\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AddAdoption = () => {\n  const locationState = useLocation().state;\n  const [state, setState] = useState({\n    approvedApplicants: [],\n    timeout: -1,\n    latestApplication: {},\n    dog: locationState && locationState.dog,\n    dateAdopted: \"\",\n    dashboardRedirect: false,\n    errorMessage: \"\",\n    cookie: {}\n  });\n  const [approvedApplicantLastNameFragment, setApprovedApplicantLastNameFragment] = useState(\"\"); // check auth\n\n  useEffect(() => {\n    const cookie = isLoggedIn();\n\n    if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n      setState({ ...state,\n        cookie\n      });\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n\n  }, []); // Don't pre-populate\n  // useEffect(() => {\n  //     if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n  //         getData(`/applicant?status=approved`)\n  //             .then(({ target }) => {\n  //                 setState({ ...state, approvedApplicants: JSON.parse(target.response) });\n  //             })\n  //             .catch(error => {\n  //                 console.log(error);\n  //             })\n  //     }\n  // }, [state.cookie]);\n\n  const getLatestApplication = (params, applicant) => {\n    const query = Object.keys(params).filter(key => params[key]).map((key, index) => `${index ? \"&\" : \"?\"}${key}=${params[key]}`).join(\"\");\n    getData(`/application${query}`).then(({\n      target\n    }) => {\n      if (target.status === 200) {\n        const latestApplication = JSON.parse(target.response)[0];\n        latestApplication.applicant = applicant;\n        setState({ ...state,\n          latestApplication\n        });\n      } else {\n        console.log(target);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const submitAdoption = () => {\n    if (state.dateAdopted === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please enter adoption date.\"\n      });\n      return;\n    }\n\n    const adoption = {\n      dateAdopted: state.dateAdopted,\n      applicationNumberFk: +state.latestApplication.id,\n      dogIdFk: state.dog.id\n    };\n    sendData(adoption, \"/adoption\").then(data => {\n      const {\n        target\n      } = data;\n\n      if (target.status === 201) {\n        // show success modal\n        setState({ ...state,\n          dashboardRedirect: true\n        });\n      } else {\n        console.log(\"error adding dog (non-201):\", target.response);\n        setState({ ...state,\n          errorMessage: target.response\n        });\n      }\n    }).catch(error => {\n      // show error modal\n      console.log(\"error adding dog (catch):\", error);\n      setState({ ...state,\n        errorMessage: error\n      });\n    });\n  };\n\n  const totalExpenses = state.dog && state.dog.expenses.reduce((sum, current) => sum + current.amountInCents / 100, 0);\n  const animalControlPays = state.dog && (state.dog.surrenderedByAnimalControl && totalExpenses || 0);\n  const adoptionFee = 1.15 * totalExpenses - animalControlPays;\n  const adoptionFeeCents = Math.round(adoptionFee % 1 * 100); // round to nearest cent\n\n  const adoptionFeeDollars = Math.floor(adoptionFee); // round down to nearest dollar\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, state.dashboardRedirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: \"/dog-dashboard\",\n      state: {\n        from: \"/add-adoption\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(NavLinks, {\n    isTrustedVolunteer: state.cookie.isTrustedVolunteer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, \"Add Adoption\"), !state.latestApplication.id && /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"approved-applicant-last-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, \"Search by approved applicant last name:\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"approved-applicant-last-name\",\n    onChange: ({\n      target\n    }) => {\n      setApprovedApplicantLastNameFragment(target.value);\n      clearTimeout(state.timeout);\n      setState({ ...state,\n        timeout: setTimeout(() => {\n          // make http call for approved applicants like\n          getData(`/applicant?like=${target.value}`).then(({\n            target\n          }) => {\n            let approvedApplicants = JSON.parse(target.response);\n\n            if (target.status === 200) {\n              setState({ ...state,\n                approvedApplicants\n              });\n            } else {\n              console.log(target);\n            }\n          }).catch(error => {\n            console.log(error);\n          });\n        }, 400)\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }))), !state.latestApplication.id && state.approvedApplicants.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, \"Select Applicant\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 37\n    }\n  }, \"First Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 37\n    }\n  }, \"Last Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 37\n    }\n  }, \"Street\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 37\n    }\n  }, \"City\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 37\n    }\n  }, \"State\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 37\n    }\n  }, \"Zip\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 37\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 37\n    }\n  }, \"Phone Number\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 37\n    }\n  }, \"Co-applicant Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 29\n    }\n  }, state.approvedApplicants.length > 0 && state.approvedApplicants.map((applicant, index) => {\n    if (applicant.coApplicantLastName) {\n      console.log(applicant.coApplicantLastName.indexOf(approvedApplicantLastNameFragment));\n    }\n\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        if (applicant.coApplicantLastName && applicant.coApplicantLastName.indexOf(approvedApplicantLastNameFragment) !== -1) {\n          getLatestApplication({\n            applicantId: applicant.id,\n            coApplicantFirstName: applicant.coApplicantFirstName,\n            coApplicantLastName: applicant.coApplicantLastName\n          }, applicant);\n        } else {\n          getLatestApplication({\n            applicantId: applicant.id\n          }, applicant);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 49\n      }\n    }, \"Select\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 45\n      }\n    }, applicant.firstName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 45\n      }\n    }, applicant.lastName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 45\n      }\n    }, applicant.street), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 45\n      }\n    }, applicant.city), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 45\n      }\n    }, applicant.state), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 45\n      }\n    }, applicant.zip), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 45\n      }\n    }, applicant.email), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 45\n      }\n    }, applicant.phoneNumber), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 45\n      }\n    }, applicant.coApplicantLastName && applicant.coApplicantLastName.indexOf(approvedApplicantLastNameFragment) !== -1 ? `${applicant.coApplicantFirstName || \"\"} ${applicant.coApplicantLastName || \"\"}` : \"\"));\n  })))), state.latestApplication.id && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }, \"Selected Application\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }\n  }, \"Application Number: \", state.latestApplication.id), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 25\n    }\n  }, \"Date: \", new Date(state.latestApplication.date).toString()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, \"Applicant Name: \", state.latestApplication.applicant.firstName, \" \", state.latestApplication.applicant.lastName), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 25\n    }\n  }, \"Applicant Address: \", state.latestApplication.applicant.street, \", \", state.latestApplication.applicant.city, \", \", state.latestApplication.applicant.state, \"  \", state.latestApplication.applicant.zipCode), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 25\n    }\n  }, \"Email: \", state.latestApplication.applicant.email), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, \"Phone Number: \", state.latestApplication.applicant.phoneNumber), (state.latestApplication.coApplicantFirstName || state.latestApplication.coApplicantLastName) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 123\n    }\n  }, \"Co-Applicant: \", state.latestApplication.coApplicantFirstName, \" \", state.latestApplication.coApplicantLastName), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, \"Expenses\"), state.dog.expenses.map(expense => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    key: expense.vendor + expense.date,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 33\n    }\n  }, \"Vendor: \", expense.vendor), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 33\n    }\n  }, \"Amount: $\", expense.amountInCents / 100), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 33\n    }\n  }, \"Description: \", expense.description), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 33\n    }\n  }, \"Date: \", expense.date))), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 25\n    }\n  }, \"Total Expenses: $\", totalExpenses), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }, \"Animal Control pays: $\", animalControlPays), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 25\n    }\n  }, \"Adoption Fee: $\", adoptionFeeDollars, \".\", adoptionFeeCents), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"adoption-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 29\n    }\n  }, \"Adoption Date:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    onChange: ({\n      target\n    }) => setState({ ...state,\n      dateAdopted: target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 29\n    }\n  }, \"I confirm every looks correct: \"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: submitAdoption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 73\n    }\n  }, \"Complete Adoption\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setState({ ...state,\n      latestApplication: {},\n      adoptionDate: \"\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 146\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\",\n      paddingLeft: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 263\n    }\n  }, state.errorMessage)))));\n};\n\nexport default AddAdoption;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AddAdoption.js"],"names":["React","useEffect","useState","Redirect","useLocation","getData","sendData","isLoggedIn","NavLinks","AddAdoption","locationState","state","setState","approvedApplicants","timeout","latestApplication","dog","dateAdopted","dashboardRedirect","errorMessage","cookie","approvedApplicantLastNameFragment","setApprovedApplicantLastNameFragment","hasOwnProperty","isTrustedVolunteer","getLatestApplication","params","applicant","query","Object","keys","filter","key","map","index","join","then","target","status","JSON","parse","response","console","log","catch","error","submitAdoption","adoption","applicationNumberFk","id","dogIdFk","data","totalExpenses","expenses","reduce","sum","current","amountInCents","animalControlPays","surrenderedByAnimalControl","adoptionFee","adoptionFeeCents","Math","round","adoptionFeeDollars","floor","pathname","from","value","clearTimeout","setTimeout","length","coApplicantLastName","indexOf","applicantId","coApplicantFirstName","firstName","lastName","street","city","zip","email","phoneNumber","Date","date","toString","zipCode","expense","vendor","description","adoptionDate","color","paddingLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect, useLocation } from \"react-router-dom\";\n\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AddAdoption = () => {\n    const locationState = useLocation().state;\n\n    const [state, setState] = useState({\n        approvedApplicants: [],\n        timeout: -1,\n        latestApplication: {},\n        dog: locationState && locationState.dog,\n        dateAdopted: \"\",\n        dashboardRedirect: false,\n        errorMessage: \"\",\n        cookie: {}\n    });\n\n    const [approvedApplicantLastNameFragment, setApprovedApplicantLastNameFragment] = useState(\"\");\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    // Don't pre-populate\n    // useEffect(() => {\n    //     if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n    //         getData(`/applicant?status=approved`)\n    //             .then(({ target }) => {\n    //                 setState({ ...state, approvedApplicants: JSON.parse(target.response) });\n    //             })\n    //             .catch(error => {\n    //                 console.log(error);\n    //             })\n    //     }\n    // }, [state.cookie]);\n\n    const getLatestApplication = (params, applicant) => {\n        const query = Object.keys(params)\n            .filter(key => params[key])\n            .map((key, index) => `${index ? \"&\" : \"?\"}${key}=${params[key]}`)\n            .join(\"\")\n\n        getData(`/application${query}`)\n            .then(({ target }) => {\n                if (target.status === 200) {\n                    const latestApplication = JSON.parse(target.response)[0]\n                    latestApplication.applicant = applicant;\n                    setState({ ...state, latestApplication });\n                } else {\n                    console.log(target);\n                }\n\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n    const submitAdoption = () => {\n        if (state.dateAdopted === \"\") {\n            setState({ ...state, errorMessage: \"Please enter adoption date.\" });\n            return;\n        }\n\n        const adoption = {\n            dateAdopted: state.dateAdopted,\n            applicationNumberFk: +state.latestApplication.id,\n            dogIdFk: state.dog.id\n        }\n        sendData(adoption, \"/adoption\")\n            .then(data => {\n                const { target } = data;\n                if (target.status === 201) {\n                    // show success modal\n                    setState({ ...state, dashboardRedirect: true });\n                } else {\n                    console.log(\"error adding dog (non-201):\", target.response);\n                    setState({ ...state, errorMessage: target.response });\n                }\n            })\n            .catch(error => {\n                // show error modal\n                console.log(\"error adding dog (catch):\", error);\n                setState({ ...state, errorMessage: error });\n            });\n    }\n\n    const totalExpenses = state.dog && state.dog.expenses.reduce((sum, current) => sum + (current.amountInCents / 100), 0);\n\n    const animalControlPays = state.dog && ((state.dog.surrenderedByAnimalControl && totalExpenses) || 0);\n\n    const adoptionFee = (1.15 * totalExpenses) - animalControlPays;\n\n    const adoptionFeeCents = Math.round((adoptionFee % 1) * 100); // round to nearest cent\n\n    const adoptionFeeDollars = Math.floor(adoptionFee); // round down to nearest dollar\n\n    return (\n        <>\n            {state.dashboardRedirect && <Redirect to={{ pathname: \"/dog-dashboard\", state: { from: \"/add-adoption\" } }} />}\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <main className=\"container\">\n                <h1>Add Adoption</h1>\n                {!state.latestApplication.id && <form>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"approved-applicant-last-name\">Search by approved applicant last name:</label>\n                        <input\n                            id=\"approved-applicant-last-name\"\n                            onChange={({ target }) => {\n                                setApprovedApplicantLastNameFragment(target.value);\n                                clearTimeout(state.timeout);\n                                setState({\n                                    ...state, timeout: setTimeout(() => {\n                                        // make http call for approved applicants like\n                                        getData(`/applicant?like=${target.value}`)\n                                            .then(({ target }) => {\n                                                let approvedApplicants = JSON.parse(target.response);\n                                                if (target.status === 200) {\n                                                    setState({ ...state, approvedApplicants });\n                                                }\n                                                else {\n                                                    console.log(target);\n                                                }\n                                            })\n                                            .catch(error => {\n                                                console.log(error);\n                                            })\n                                    }, 400)\n                                });\n                            }}\n                        />\n                    </div>\n\n                </form>}\n\n                {!state.latestApplication.id && state.approvedApplicants.length > 0 && (\n                    <>\n                        <h3>Select Applicant</h3>\n                        <table>\n                            <thead>\n                                <tr>\n                                    <th></th>\n                                    <th>First Name</th>\n                                    <th>Last Name</th>\n                                    <th>Street</th>\n                                    <th>City</th>\n                                    <th>State</th>\n                                    <th>Zip</th>\n                                    <th>Email</th>\n                                    <th>Phone Number</th>\n                                    <th>Co-applicant Name</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {state.approvedApplicants.length > 0 && state.approvedApplicants.map((applicant, index) => {\n                                    if (applicant.coApplicantLastName) {\n                                        console.log(applicant.coApplicantLastName.indexOf(approvedApplicantLastNameFragment));\n                                    }\n\n                                    return (\n                                        <tr key={index} >\n                                            <td>\n                                                <button type=\"button\" onClick={() => {\n                                                    if (applicant.coApplicantLastName && applicant.coApplicantLastName.indexOf(approvedApplicantLastNameFragment) !== -1) {\n                                                        getLatestApplication({ applicantId: applicant.id, coApplicantFirstName: applicant.coApplicantFirstName, coApplicantLastName: applicant.coApplicantLastName }, applicant);\n                                                    } else {\n                                                        getLatestApplication({ applicantId: applicant.id }, applicant);\n                                                    }\n                                                }}>Select</button>\n                                            </td>\n                                            <td>{applicant.firstName}</td>\n                                            <td>{applicant.lastName}</td>\n                                            <td>{applicant.street}</td>\n                                            <td>{applicant.city}</td>\n                                            <td>{applicant.state}</td>\n                                            <td>{applicant.zip}</td>\n                                            <td>{applicant.email}</td>\n                                            <td>{applicant.phoneNumber}</td>\n                                            <td>{(applicant.coApplicantLastName && applicant.coApplicantLastName.indexOf(approvedApplicantLastNameFragment) !== -1) ? `${applicant.coApplicantFirstName || \"\"} ${applicant.coApplicantLastName || \"\"}` : \"\"}</td>\n                                        </tr>\n                                    );\n\n                                })}\n                            </tbody>\n                        </table>\n                    </>\n                )}\n                {/* {!state.latestApplication.id && !state.approvedApplicants.length && (<h3>There are not currently any approved applications.</h3>)} */}\n                {state.latestApplication.id && (\n                    <>\n                        <h3>Selected Application</h3>\n                        <div className=\"form-unit\">Application Number: {state.latestApplication.id}</div>\n                        <div className=\"form-unit\">Date: {new Date(state.latestApplication.date).toString()}</div>\n                        <div className=\"form-unit\">Applicant Name: {state.latestApplication.applicant.firstName} {state.latestApplication.applicant.lastName}</div>\n                        <div className=\"form-unit\">Applicant Address: {state.latestApplication.applicant.street}, {state.latestApplication.applicant.city}, {state.latestApplication.applicant.state}  {state.latestApplication.applicant.zipCode}</div>\n                        <div className=\"form-unit\">Email: {state.latestApplication.applicant.email}</div>\n                        <div className=\"form-unit\">Phone Number: {state.latestApplication.applicant.phoneNumber}</div>\n                        {(state.latestApplication.coApplicantFirstName || state.latestApplication.coApplicantLastName) && <div className=\"form-unit\">Co-Applicant: {state.latestApplication.coApplicantFirstName} {state.latestApplication.coApplicantLastName}</div>}\n                        <h3>Expenses</h3>\n                        {state.dog.expenses.map(expense => (\n                            <div className=\"form-unit\" key={expense.vendor + expense.date}>\n                                <div>Vendor: {expense.vendor}</div>\n                                <div>Amount: ${expense.amountInCents / 100}</div>\n                                <div>Description: {expense.description}</div>\n                                <div>Date: {expense.date}</div>\n                            </div>\n                        ))}\n                        <h3>Total Expenses: ${totalExpenses}</h3>\n                        <h3>Animal Control pays: ${animalControlPays}</h3>\n                        <h3>Adoption Fee: ${adoptionFeeDollars}.{adoptionFeeCents}</h3>\n                        <div>\n                            <label htmlFor=\"adoption-date\">Adoption Date:</label>\n                            <input type=\"date\" onChange={({ target }) => setState({ ...state, dateAdopted: target.value })} />\n                        </div>\n                        <div className=\"form-unit\">\n                            <span>I confirm every looks correct: </span><button type=\"button\" onClick={submitAdoption}>Complete Adoption</button><button type=\"button\" onClick={() => setState({ ...state, latestApplication: {}, adoptionDate: \"\" })}>Cancel</button><span style={{ color: \"red\", paddingLeft: \"10px\" }}>{state.errorMessage}</span>\n                        </div>\n                    </>\n                )}\n            </main>\n        </>\n    )\n\n\n}\n\nexport default AddAdoption;"]},"metadata":{},"sourceType":"module"}