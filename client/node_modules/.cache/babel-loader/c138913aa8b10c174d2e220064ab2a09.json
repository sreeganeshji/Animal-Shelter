{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useReducer,useState}from\"react\";import{Redirect}from\"react-router-dom\";import{getData,sendData}from\"../services/api\";import{isLoggedIn}from\"../services/auth\";import{NavLinks}from\"../components\";var AddDog=function AddDog(){var _useState=useState({loginRedirect:false,cookie:{}}),_useState2=_slicedToArray(_useState,2),pageState=_useState2[0],setPageState=_useState2[1];// check auth\nuseEffect(function(){var cookie=isLoggedIn();if(cookie.hasOwnProperty(\"isTrustedVolunteer\")&&cookie.isTrustedVolunteer!==null){setPageState(_objectSpread(_objectSpread({},pageState),{},{cookie:cookie}));}/* eslint-disable react-hooks/exhaustive-deps */},[]);var reducer=function reducer(state,action){switch(action.type){case\"dogName\":return _objectSpread(_objectSpread({},state),{},{dogName:action.payload});case\"breed\":var newBreed=state.breed;if(action.payload.checked){newBreed[action.payload.breed]=true;if(action.payload.breed===\"Mixed\"||action.payload.breed===\"Unknown\"){// delete all other breeds\nfor(var key in newBreed){if(key!==action.payload.breed){delete newBreed[key];document.querySelector(\"#\".concat(key.split(\" \").join(\"-\"))).checked=false;}}}}else{delete newBreed[action.payload.breed];}return _objectSpread(_objectSpread({},state),{},{breed:newBreed});case\"sex\":return _objectSpread(_objectSpread({},state),{},{sex:action.payload});case\"alterationStatus\":return _objectSpread(_objectSpread({},state),{},{alterationStatus:action.payload});case\"dateOfBirth\":return _objectSpread(_objectSpread({},state),{},{dateOfBirth:action.payload});case\"description\":return _objectSpread(_objectSpread({},state),{},{description:action.payload});case\"microchipId\":return _objectSpread(_objectSpread({},state),{},{microchipId:action.payload});case\"expenses\":return _objectSpread(_objectSpread({},state),{},{expenses:action.payload});case\"surrenderDate\":return _objectSpread(_objectSpread({},state),{},{surrenderDate:action.payload});case\"surrenderReason\":return _objectSpread(_objectSpread({},state),{},{surrenderReason:action.payload});case\"surrenderedByAnimalControl\":return _objectSpread(_objectSpread({},state),{},{surrenderedByAnimalControl:action.payload});case\"availableBreeds\":return _objectSpread(_objectSpread({},state),{},{availableBreeds:action.payload});case\"errorMessage\":return _objectSpread(_objectSpread({},state),{},{errorMessage:action.payload});case\"showModal\":return _objectSpread(_objectSpread({},state),{},{id:action.payload,showModal:true});case\"dogDetail\":return _objectSpread(_objectSpread({},state),{},{detailRedirect:true});case\"dogDashboard\":return _objectSpread(_objectSpread({},state),{},{dashboardRedirect:true});default:throw new Error();}};var _useReducer=useReducer(reducer,{dogName:\"\",breed:{},sex:null,alterationStatus:null,dateOfBirth:\"\",description:\"\",microchipId:\"\",surrenderDate:\"\",surrenderReason:\"\",surrenderedByAnimalControl:null,availableBreeds:[],errorMessage:\"\",showModal:false,detailRedirect:false,dashboardRedirect:false,id:-1}),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var dogName=state.dogName,breed=state.breed,sex=state.sex,alterationStatus=state.alterationStatus,dateOfBirth=state.dateOfBirth,description=state.description,microchipId=state.microchipId,surrenderDate=state.surrenderDate,surrenderReason=state.surrenderReason,surrenderedByAnimalControl=state.surrenderedByAnimalControl,availableBreeds=state.availableBreeds,errorMessage=state.errorMessage,showModal=state.showModal,detailRedirect=state.detailRedirect,dashboardRedirect=state.dashboardRedirect,id=state.id;useEffect(function(){if(pageState.cookie.hasOwnProperty(\"isTrustedVolunteer\")&&pageState.cookie.isTrustedVolunteer!==null){getData(\"/breed\").then(function(_ref){var target=_ref.target;dispatch({type:'availableBreeds',payload:JSON.parse(target.response)});}).catch(function(error){dispatch({type:\"errorMessage\",payload:error});console.log(\"error:\",error);});}},[pageState.cookie]);var addDog=function addDog(){var volunteerId=JSON.parse(localStorage.getItem(\"volunteerId\"));var dogData={name:dogName,breed:Object.keys(breed),sex:sex,alterationStatus:alterationStatus===\"true\"?true:false,dateOfBirth:dateOfBirth,description:description,surrenderDate:surrenderDate,surrenderReason:surrenderReason,surrenderedByAnimalControl:surrenderedByAnimalControl,volunteerId:volunteerId};if(microchipId){dogData.microchipId={\"String\":microchipId,\"Valid\":true};}if(validateDog()){sendData(dogData,\"/dog\").then(function(data){var target=data.target;if(target.status===201){// show success modal\ndispatch({type:\"showModal\",payload:JSON.parse(target.response).id});}else{console.log(\"error adding dog (non-201):\",target.response);dispatch({type:\"errorMessage\",payload:target.response});}}).catch(function(error){// show error modal\nconsole.log(\"error adding dog (catch):\",error);dispatch({type:\"errorMessage\",payload:error});});}};var validateDog=function validateDog(){if(!dogName){dispatch({type:\"errorMessage\",payload:\"Please enter dog name.\"});return false;}if(dogName.toLowerCase()===\"uga\"){var isError=false;Object.keys(breed).forEach(function(b){// prohibit any type of bulldog named Uga\nif(b.toLowerCase().indexOf(\"bulldog\")!==-1){dispatch({type:\"errorMessage\",payload:\"BullDog can not be named 'Uga'.\"});isError=true;}});if(isError){return false;}}if(!Object.keys(breed).length){dispatch({type:\"errorMessage\",payload:\"Please select at least one dog breed.\"});return false;}if(!sex){dispatch({type:\"errorMessage\",payload:\"Please indicate dog's sex (or select unknown).\"});return false;}if(!alterationStatus){dispatch({type:\"errorMessage\",payload:\"Please indicate dog's alteration status.\"});return false;}if(!dateOfBirth){dispatch({type:\"errorMessage\",payload:\"Please enter dog's date of birth.\"});return false;}if(!description){dispatch({type:\"errorMessage\",payload:\"Please enter dog description.\"});return false;}if(!surrenderDate){dispatch({type:\"errorMessage\",payload:\"Please enter dog's surrender date.\"});return false;}if(!surrenderReason){dispatch({type:\"errorMessage\",payload:\"Please enter reason for dog surrender.\"});return false;}if(!surrenderedByAnimalControl){dispatch({type:\"errorMessage\",payload:\"Please indicate whether dog was surrendered by Animal Control.\"});return false;}return true;};return/*#__PURE__*/React.createElement(React.Fragment,null,detailRedirect&&/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/dog-details/\".concat(id),state:{from:\"/add-dog\"}}}),dashboardRedirect&&/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/dog-dashboard\",state:{from:\"/add-dog\"}}}),/*#__PURE__*/React.createElement(NavLinks,{isTrustedVolunteer:pageState.cookie.isTrustedVolunteer}),/*#__PURE__*/React.createElement(\"main\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Add Dog\"),/*#__PURE__*/React.createElement(\"div\",{style:{overflow:showModal?\"hidden\":\"scroll\",clear:\"left\"}},/*#__PURE__*/React.createElement(\"h3\",null,\"All fields are required unless otherwise stated.\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"dogName\"},\"Dog Name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:dogName,id:\"dogName\",onChange:function onChange(_ref2){var target=_ref2.target;dispatch({type:'dogName',payload:target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"breed\"},\"Dog Breed: (Please select at least one.)\"),/*#__PURE__*/React.createElement(\"div\",{className:\"scroll-box\"},availableBreeds.map(function(_ref3){var id=_ref3.id,_ref3$breed=_ref3.breed,b=_ref3$breed===void 0?\"\":_ref3$breed;return/*#__PURE__*/React.createElement(\"p\",{key:id},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",value:b,id:b.split(\" \").join(\"-\"),onChange:function onChange(_ref4){var target=_ref4.target;dispatch({type:'breed',payload:{breed:target.value,checked:target.checked}});},disabled:(breed[\"Mixed\"]||breed[\"Unknown\"])&&!(b===\"Mixed\"||b===\"Unknown\")}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:b,style:{display:\"inline\",paddingLeft:\"10px\"}},b));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"sex\"},\"Dog Sex:\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"male\",name:\"sex\",value:\"male\",onChange:function onChange(_ref5){var target=_ref5.target;dispatch({type:'sex',payload:target.value});}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"male\",style:{display:\"inline\"}},\"Male\")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"female\",name:\"sex\",value:\"female\",onChange:function onChange(_ref6){var target=_ref6.target;dispatch({type:'sex',payload:target.value});}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"female\",style:{display:\"inline\"}},\"Female\")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"unknown\",name:\"sex\",value:\"unknown\",onChange:function onChange(_ref7){var target=_ref7.target;dispatch({type:'sex',payload:target.value});}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"unknown\",style:{display:\"inline\"}},\"Unknown\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"alterationStatus\"},\"Dog Alteration Status:\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"altered\",name:\"alterationStatus\",value:true,onChange:function onChange(_ref8){var target=_ref8.target;dispatch({type:'alterationStatus',payload:target.value});}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"altered\",style:{display:\"inline\"}},\"Spayed/Neutered\")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"unaltered\",name:\"alterationStatus\",value:false,onChange:function onChange(_ref9){var target=_ref9.target;dispatch({type:'alterationStatus',payload:target.value});}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"unaltered\",style:{display:\"inline\"}},\"Unaltered\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"dateOfBirth\"},\"Dog Date of Birth:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",value:dateOfBirth,id:\"dateOfBirth\",onChange:function onChange(_ref10){var target=_ref10.target;dispatch({type:'dateOfBirth',payload:target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"description\"},\"Dog Description:\"),/*#__PURE__*/React.createElement(\"textarea\",{value:description,id:\"description\",onChange:function onChange(_ref11){var target=_ref11.target;dispatch({type:'description',payload:target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"microchipId\"},\"Dog Microchip ID: (leave blank if none)\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:microchipId,id:\"microchipId\",onChange:function onChange(_ref12){var target=_ref12.target;dispatch({type:'microchipId',payload:target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"surrenderDate\"},\"Dog Surrender Date:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",value:surrenderDate,id:\"surrenderDate\",onChange:function onChange(_ref13){var target=_ref13.target;dispatch({type:'surrenderDate',payload:target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"surrenderReason\"},\"Dog Surrender Reason:\"),/*#__PURE__*/React.createElement(\"textarea\",{value:surrenderReason,id:\"surrenderReason\",onChange:function onChange(_ref14){var target=_ref14.target;dispatch({type:'surrenderReason',payload:target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-unit\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"surrenderedByAnimalControl\"},\"Dog Was Surrendered by Animal Control:\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"was\",name:\"surrenderedByAnimalControl\",value:\"true\",onChange:function onChange(_ref15){var target=_ref15.target;dispatch({type:'surrenderedByAnimalControl',payload:target.value});}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"was\",style:{display:\"inline\"}},\"Yes\")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"wasNot\",name:\"surrenderedByAnimalControl\",value:\"false\",onChange:function onChange(_ref16){var target=_ref16.target;dispatch({type:'surrenderedByAnimalControl',payload:target.value});}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"wasNot\",style:{display:\"inline\"}},\"No\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:addDog},\"Submit\"),/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\",paddingLeft:\"10px\"}},errorMessage)),showModal&&/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",overflow:\"hidden\"}},/*#__PURE__*/React.createElement(\"div\",{style:{position:\"fixed\",top:0,right:0,bottom:0,left:0,zIndex:10,backgroundColor:\"black\",opacity:0.5}}),/*#__PURE__*/React.createElement(\"div\",{style:{position:\"fixed\",left:\"50%\",bottom:\"50%\",marginLeft:\"-300px\",marginBottom:\"-150px\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",zIndex:100,height:\"300px\",width:\"600px\",backgroundColor:\"white\"}},/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:\"20px\"}},/*#__PURE__*/React.createElement(\"span\",null,\"Dog successfully created.\")),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"20px\"}},\"Would you like to go to\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return dispatch({type:\"dogDetail\",payload:id});}},\"Dog Detail View\"),/*#__PURE__*/React.createElement(\"span\",{style:{margin:\"20px\"}},\" or \"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return dispatch({type:\"dogDashboard\"});}},\"Back to Dog Dashboard\")))))));};export default AddDog;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AddDog.js"],"names":["React","useEffect","useReducer","useState","Redirect","getData","sendData","isLoggedIn","NavLinks","AddDog","loginRedirect","cookie","pageState","setPageState","hasOwnProperty","isTrustedVolunteer","reducer","state","action","type","dogName","payload","newBreed","breed","checked","key","document","querySelector","split","join","sex","alterationStatus","dateOfBirth","description","microchipId","expenses","surrenderDate","surrenderReason","surrenderedByAnimalControl","availableBreeds","errorMessage","id","showModal","detailRedirect","dashboardRedirect","Error","dispatch","then","target","JSON","parse","response","catch","error","console","log","addDog","volunteerId","localStorage","getItem","dogData","name","Object","keys","validateDog","data","status","toLowerCase","isError","forEach","b","indexOf","length","pathname","from","overflow","clear","value","map","display","paddingLeft","color","flexDirection","alignItems","justifyContent","position","top","right","bottom","left","zIndex","backgroundColor","opacity","marginLeft","marginBottom","height","width","margin"],"mappings":"qYAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,OAASC,OAAT,CAAkBC,QAAlB,KAAkC,iBAAlC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,QAAT,KAAyB,eAAzB,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,eACiBN,QAAQ,CAAC,CACvCO,aAAa,CAAE,KADwB,CAEvCC,MAAM,CAAE,EAF+B,CAAD,CADzB,wCACVC,SADU,eACCC,YADD,eAMjB;AACAZ,SAAS,CAAC,UAAM,CACZ,GAAMU,CAAAA,MAAM,CAAGJ,UAAU,EAAzB,CACA,GAAII,MAAM,CAACG,cAAP,CAAsB,oBAAtB,GAA+CH,MAAM,CAACI,kBAAP,GAA8B,IAAjF,CAAuF,CACnFF,YAAY,gCAAMD,SAAN,MAAiBD,MAAM,CAANA,MAAjB,GAAZ,CACH,CACD,gDACH,CANQ,CAMN,EANM,CAAT,CAQA,GAAMK,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAQC,MAAR,CAAmB,CAC/B,OAAQA,MAAM,CAACC,IAAf,EACI,IAAK,SAAL,CACI,sCAAYF,KAAZ,MAAmBG,OAAO,CAAEF,MAAM,CAACG,OAAnC,GACJ,IAAK,OAAL,CACI,GAAIC,CAAAA,QAAQ,CAAGL,KAAK,CAACM,KAArB,CACA,GAAIL,MAAM,CAACG,OAAP,CAAeG,OAAnB,CAA4B,CACxBF,QAAQ,CAACJ,MAAM,CAACG,OAAP,CAAeE,KAAhB,CAAR,CAAiC,IAAjC,CACA,GAAIL,MAAM,CAACG,OAAP,CAAeE,KAAf,GAAyB,OAAzB,EAAoCL,MAAM,CAACG,OAAP,CAAeE,KAAf,GAAyB,SAAjE,CAA4E,CACxE;AACA,IAAK,GAAME,CAAAA,GAAX,GAAkBH,CAAAA,QAAlB,CAA4B,CACxB,GAAIG,GAAG,GAAKP,MAAM,CAACG,OAAP,CAAeE,KAA3B,CAAkC,CAC9B,MAAOD,CAAAA,QAAQ,CAACG,GAAD,CAAf,CACAC,QAAQ,CAACC,aAAT,YAA2BF,GAAG,CAACG,KAAJ,CAAU,GAAV,EAAeC,IAAf,CAAoB,GAApB,CAA3B,GAAuDL,OAAvD,CAAiE,KAAjE,CACH,CACJ,CACJ,CACJ,CAXD,IAWO,CACH,MAAOF,CAAAA,QAAQ,CAACJ,MAAM,CAACG,OAAP,CAAeE,KAAhB,CAAf,CACH,CACD,sCAAYN,KAAZ,MAAmBM,KAAK,CAAED,QAA1B,GACJ,IAAK,KAAL,CACI,sCAAYL,KAAZ,MAAmBa,GAAG,CAAEZ,MAAM,CAACG,OAA/B,GACJ,IAAK,kBAAL,CACI,sCAAYJ,KAAZ,MAAmBc,gBAAgB,CAAEb,MAAM,CAACG,OAA5C,GACJ,IAAK,aAAL,CACI,sCAAYJ,KAAZ,MAAmBe,WAAW,CAAEd,MAAM,CAACG,OAAvC,GACJ,IAAK,aAAL,CACI,sCAAYJ,KAAZ,MAAmBgB,WAAW,CAAEf,MAAM,CAACG,OAAvC,GACJ,IAAK,aAAL,CACI,sCAAYJ,KAAZ,MAAmBiB,WAAW,CAAEhB,MAAM,CAACG,OAAvC,GACJ,IAAK,UAAL,CACI,sCAAYJ,KAAZ,MAAmBkB,QAAQ,CAAEjB,MAAM,CAACG,OAApC,GACJ,IAAK,eAAL,CACI,sCAAYJ,KAAZ,MAAmBmB,aAAa,CAAElB,MAAM,CAACG,OAAzC,GACJ,IAAK,iBAAL,CACI,sCAAYJ,KAAZ,MAAmBoB,eAAe,CAAEnB,MAAM,CAACG,OAA3C,GACJ,IAAK,4BAAL,CACI,sCAAYJ,KAAZ,MAAmBqB,0BAA0B,CAAEpB,MAAM,CAACG,OAAtD,GACJ,IAAK,iBAAL,CACI,sCAAYJ,KAAZ,MAAmBsB,eAAe,CAAErB,MAAM,CAACG,OAA3C,GACJ,IAAK,cAAL,CACI,sCAAYJ,KAAZ,MAAmBuB,YAAY,CAAEtB,MAAM,CAACG,OAAxC,GACJ,IAAK,WAAL,CACI,sCAAYJ,KAAZ,MAAmBwB,EAAE,CAAEvB,MAAM,CAACG,OAA9B,CAAuCqB,SAAS,CAAE,IAAlD,GACJ,IAAK,WAAL,CACI,sCAAYzB,KAAZ,MAAmB0B,cAAc,CAAE,IAAnC,GACJ,IAAK,cAAL,CACI,sCAAY1B,KAAZ,MAAmB2B,iBAAiB,CAAE,IAAtC,GACJ,QACI,KAAM,IAAIC,CAAAA,KAAJ,EAAN,CAjDR,CAmDH,CApDD,CAfiB,gBAqES3C,UAAU,CAChCc,OADgC,CAEhC,CACII,OAAO,CAAE,EADb,CAEIG,KAAK,CAAE,EAFX,CAGIO,GAAG,CAAE,IAHT,CAIIC,gBAAgB,CAAE,IAJtB,CAKIC,WAAW,CAAE,EALjB,CAMIC,WAAW,CAAE,EANjB,CAOIC,WAAW,CAAE,EAPjB,CAQIE,aAAa,CAAE,EARnB,CASIC,eAAe,CAAE,EATrB,CAUIC,0BAA0B,CAAE,IAVhC,CAWIC,eAAe,CAAE,EAXrB,CAYIC,YAAY,CAAE,EAZlB,CAaIE,SAAS,CAAE,KAbf,CAcIC,cAAc,CAAE,KAdpB,CAeIC,iBAAiB,CAAE,KAfvB,CAgBIH,EAAE,CAAE,CAAC,CAhBT,CAFgC,CArEnB,4CAqEVxB,KArEU,iBAqEH6B,QArEG,oBA2Fb1B,CAAAA,OA3Fa,CA2GbH,KA3Ga,CA2FbG,OA3Fa,CA4FbG,KA5Fa,CA2GbN,KA3Ga,CA4FbM,KA5Fa,CA6FbO,GA7Fa,CA2Gbb,KA3Ga,CA6Fba,GA7Fa,CA8FbC,gBA9Fa,CA2Gbd,KA3Ga,CA8Fbc,gBA9Fa,CA+FbC,WA/Fa,CA2Gbf,KA3Ga,CA+Fbe,WA/Fa,CAgGbC,WAhGa,CA2GbhB,KA3Ga,CAgGbgB,WAhGa,CAiGbC,WAjGa,CA2GbjB,KA3Ga,CAiGbiB,WAjGa,CAkGbE,aAlGa,CA2GbnB,KA3Ga,CAkGbmB,aAlGa,CAmGbC,eAnGa,CA2GbpB,KA3Ga,CAmGboB,eAnGa,CAoGbC,0BApGa,CA2GbrB,KA3Ga,CAoGbqB,0BApGa,CAqGbC,eArGa,CA2GbtB,KA3Ga,CAqGbsB,eArGa,CAsGbC,YAtGa,CA2GbvB,KA3Ga,CAsGbuB,YAtGa,CAuGbE,SAvGa,CA2GbzB,KA3Ga,CAuGbyB,SAvGa,CAwGbC,cAxGa,CA2Gb1B,KA3Ga,CAwGb0B,cAxGa,CAyGbC,iBAzGa,CA2Gb3B,KA3Ga,CAyGb2B,iBAzGa,CA0GbH,EA1Ga,CA2GbxB,KA3Ga,CA0GbwB,EA1Ga,CA6GjBxC,SAAS,CAAC,UAAM,CACZ,GAAIW,SAAS,CAACD,MAAV,CAAiBG,cAAjB,CAAgC,oBAAhC,GAAyDF,SAAS,CAACD,MAAV,CAAiBI,kBAAjB,GAAwC,IAArG,CAA2G,CACvGV,OAAO,CAAC,QAAD,CAAP,CACK0C,IADL,CACU,cAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,CAClBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,iBAAR,CAA2BE,OAAO,CAAE4B,IAAI,CAACC,KAAL,CAAWF,MAAM,CAACG,QAAlB,CAApC,CAAD,CAAR,CACH,CAHL,EAIKC,KAJL,CAIW,SAAAC,KAAK,CAAI,CACZP,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAEgC,KAAjC,CAAD,CAAR,CACAC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBF,KAAtB,EACH,CAPL,EAQH,CACJ,CAXQ,CAWN,CAACzC,SAAS,CAACD,MAAX,CAXM,CAAT,CAaA,GAAM6C,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,GAAMC,CAAAA,WAAW,CAAGR,IAAI,CAACC,KAAL,CAAWQ,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAApB,CACA,GAAMC,CAAAA,OAAO,CAAG,CACZC,IAAI,CAAEzC,OADM,CAEZG,KAAK,CAAEuC,MAAM,CAACC,IAAP,CAAYxC,KAAZ,CAFK,CAGZO,GAAG,CAAHA,GAHY,CAIZC,gBAAgB,CAAEA,gBAAgB,GAAK,MAArB,CAA8B,IAA9B,CAAqC,KAJ3C,CAKZC,WAAW,CAAXA,WALY,CAMZC,WAAW,CAAXA,WANY,CAOZG,aAAa,CAAbA,aAPY,CAQZC,eAAe,CAAfA,eARY,CASZC,0BAA0B,CAA1BA,0BATY,CAUZmB,WAAW,CAAXA,WAVY,CAAhB,CAYA,GAAIvB,WAAJ,CAAiB,CACb0B,OAAO,CAAC1B,WAAR,CAAsB,CAAE,SAAUA,WAAZ,CAAyB,QAAS,IAAlC,CAAtB,CACH,CACD,GAAI8B,WAAW,EAAf,CAAmB,CACf1D,QAAQ,CAACsD,OAAD,CAAU,MAAV,CAAR,CACKb,IADL,CACU,SAAAkB,IAAI,CAAI,IACFjB,CAAAA,MADE,CACSiB,IADT,CACFjB,MADE,CAEV,GAAIA,MAAM,CAACkB,MAAP,GAAkB,GAAtB,CAA2B,CACvB;AACApB,QAAQ,CAAC,CAAE3B,IAAI,CAAE,WAAR,CAAqBE,OAAO,CAAE4B,IAAI,CAACC,KAAL,CAAWF,MAAM,CAACG,QAAlB,EAA4BV,EAA1D,CAAD,CAAR,CACH,CAHD,IAGO,CACHa,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAA2CP,MAAM,CAACG,QAAlD,EACAL,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE2B,MAAM,CAACG,QAAxC,CAAD,CAAR,CACH,CACJ,CAVL,EAWKC,KAXL,CAWW,SAAAC,KAAK,CAAI,CACZ;AACAC,OAAO,CAACC,GAAR,CAAY,2BAAZ,CAAyCF,KAAzC,EACAP,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAEgC,KAAjC,CAAD,CAAR,CACH,CAfL,EAgBH,CACJ,CAnCD,CAqCA,GAAMW,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAI,CAAC5C,OAAL,CAAc,CACV0B,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,wBAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,GAAID,OAAO,CAAC+C,WAAR,KAA0B,KAA9B,CAAqC,CACjC,GAAIC,CAAAA,OAAO,CAAG,KAAd,CACAN,MAAM,CAACC,IAAP,CAAYxC,KAAZ,EAAmB8C,OAAnB,CAA2B,SAAAC,CAAC,CAAI,CAC5B;AACA,GAAIA,CAAC,CAACH,WAAF,GAAgBI,OAAhB,CAAwB,SAAxB,IAAuC,CAAC,CAA5C,CAA+C,CAC3CzB,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,iCAAjC,CAAD,CAAR,CACA+C,OAAO,CAAG,IAAV,CACH,CACJ,CAND,EAOA,GAAIA,OAAJ,CAAa,CACT,MAAO,MAAP,CACH,CACJ,CACD,GAAI,CAACN,MAAM,CAACC,IAAP,CAAYxC,KAAZ,EAAmBiD,MAAxB,CAAgC,CAC5B1B,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,uCAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,GAAI,CAACS,GAAL,CAAU,CACNgB,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,gDAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,GAAI,CAACU,gBAAL,CAAuB,CACnBe,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,0CAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,GAAI,CAACW,WAAL,CAAkB,CACdc,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,mCAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,GAAI,CAACY,WAAL,CAAkB,CACda,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,+BAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,GAAI,CAACe,aAAL,CAAoB,CAChBU,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,oCAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,GAAI,CAACgB,eAAL,CAAsB,CAClBS,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,wCAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,GAAI,CAACiB,0BAAL,CAAiC,CAC7BQ,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAwBE,OAAO,CAAE,gEAAjC,CAAD,CAAR,CACA,MAAO,MAAP,CACH,CACD,MAAO,KAAP,CACH,CAnDD,CAqDA,mBACI,wCACKsB,cAAc,eAAI,oBAAC,QAAD,EAAU,EAAE,CAAE,CAAE8B,QAAQ,wBAAkBhC,EAAlB,CAAV,CAAkCxB,KAAK,CAAE,CAAEyD,IAAI,CAAE,UAAR,CAAzC,CAAd,EADvB,CAEK9B,iBAAiB,eAAI,oBAAC,QAAD,EAAU,EAAE,CAAE,CAAE6B,QAAQ,CAAE,gBAAZ,CAA8BxD,KAAK,CAAE,CAAEyD,IAAI,CAAE,UAAR,CAArC,CAAd,EAF1B,cAGI,oBAAC,QAAD,EAAU,kBAAkB,CAAE9D,SAAS,CAACD,MAAV,CAAiBI,kBAA/C,EAHJ,cAII,4BAAM,SAAS,CAAC,WAAhB,eACI,wCADJ,cAEI,2BAAK,KAAK,CAAE,CAAE4D,QAAQ,CAAEjC,SAAS,CAAG,QAAH,CAAc,QAAnC,CAA6CkC,KAAK,CAAE,MAApD,CAAZ,eACI,iFADJ,cAEI,6CACI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,SAAf,cADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CACI,KAAK,CAAExD,OADX,CAEI,EAAE,CAAC,SAFP,CAGI,QAAQ,CAAE,wBAAgB,IAAb4B,CAAAA,MAAa,OAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,SAAR,CAAmBE,OAAO,CAAE2B,MAAM,CAAC6B,KAAnC,CAAD,CAAR,CACH,CALL,EAFJ,CADJ,cAWI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,OAAf,6CADJ,cAEI,2BAAK,SAAS,CAAC,YAAf,EACKtC,eAAe,CAACuC,GAAhB,CAAoB,mBAAGrC,CAAAA,EAAH,OAAGA,EAAH,mBAAOlB,KAAP,CAAc+C,CAAd,sBAAkB,EAAlB,gCACjB,yBAAG,GAAG,CAAE7B,EAAR,eACI,6BAAO,IAAI,CAAC,UAAZ,CACI,KAAK,CAAE6B,CADX,CAEI,EAAE,CAAEA,CAAC,CAAC1C,KAAF,CAAQ,GAAR,EAAaC,IAAb,CAAkB,GAAlB,CAFR,CAGI,QAAQ,CAAE,wBAAgB,IAAbmB,CAAAA,MAAa,OAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,OAAR,CAAiBE,OAAO,CAAE,CAAEE,KAAK,CAAEyB,MAAM,CAAC6B,KAAhB,CAAuBrD,OAAO,CAAEwB,MAAM,CAACxB,OAAvC,CAA1B,CAAD,CAAR,CACH,CALL,CAMI,QAAQ,CAAE,CAACD,KAAK,CAAC,OAAD,CAAL,EAAkBA,KAAK,CAAC,SAAD,CAAxB,GAAwC,EAAE+C,CAAC,GAAK,OAAN,EAAiBA,CAAC,GAAK,SAAzB,CANtD,EADJ,cAQM,6BAAO,OAAO,CAAEA,CAAhB,CAAmB,KAAK,CAAE,CAAES,OAAO,CAAE,QAAX,CAAqBC,WAAW,CAAE,MAAlC,CAA1B,EAAuEV,CAAvE,CARN,CADiB,EAApB,CADL,CAFJ,CAXJ,cA4BI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,KAAf,aADJ,cAEI,0CACI,6BAAO,IAAI,CAAC,OAAZ,CACI,EAAE,CAAC,MADP,CAEI,IAAI,CAAC,KAFT,CAGI,KAAK,CAAC,MAHV,CAII,QAAQ,CAAE,wBAAgB,IAAbtB,CAAAA,MAAa,OAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,KAAR,CAAeE,OAAO,CAAE2B,MAAM,CAAC6B,KAA/B,CAAD,CAAR,CACH,CANL,EADJ,cASI,6BAAO,OAAO,CAAC,MAAf,CAAsB,KAAK,CAAE,CAAEE,OAAO,CAAE,QAAX,CAA7B,SATJ,CAFJ,cAaI,0CACI,6BAAO,IAAI,CAAC,OAAZ,CACI,EAAE,CAAC,QADP,CAEI,IAAI,CAAC,KAFT,CAGI,KAAK,CAAC,QAHV,CAII,QAAQ,CAAE,wBAAgB,IAAb/B,CAAAA,MAAa,OAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,KAAR,CAAeE,OAAO,CAAE2B,MAAM,CAAC6B,KAA/B,CAAD,CAAR,CACH,CANL,EADJ,cASI,6BAAO,OAAO,CAAC,QAAf,CAAwB,KAAK,CAAE,CAAEE,OAAO,CAAE,QAAX,CAA/B,WATJ,CAbJ,cAwBI,0CACI,6BAAO,IAAI,CAAC,OAAZ,CACI,EAAE,CAAC,SADP,CAEI,IAAI,CAAC,KAFT,CAGI,KAAK,CAAC,SAHV,CAII,QAAQ,CAAE,wBAAgB,IAAb/B,CAAAA,MAAa,OAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,KAAR,CAAeE,OAAO,CAAE2B,MAAM,CAAC6B,KAA/B,CAAD,CAAR,CACH,CANL,EADJ,cASI,6BAAO,OAAO,CAAC,SAAf,CAAyB,KAAK,CAAE,CAAEE,OAAO,CAAE,QAAX,CAAhC,YATJ,CAxBJ,CA5BJ,cAiEI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,kBAAf,2BADJ,cAEI,0CACI,6BAAO,IAAI,CAAC,OAAZ,CACI,EAAE,CAAC,SADP,CAEI,IAAI,CAAC,kBAFT,CAGI,KAAK,CAAE,IAHX,CAII,QAAQ,CAAE,wBAAgB,IAAb/B,CAAAA,MAAa,OAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,kBAAR,CAA4BE,OAAO,CAAE2B,MAAM,CAAC6B,KAA5C,CAAD,CAAR,CACH,CANL,EADJ,cASI,6BAAO,OAAO,CAAC,SAAf,CAAyB,KAAK,CAAE,CAAEE,OAAO,CAAE,QAAX,CAAhC,oBATJ,CAFJ,cAaI,0CACI,6BAAO,IAAI,CAAC,OAAZ,CACI,EAAE,CAAC,WADP,CAEI,IAAI,CAAC,kBAFT,CAGI,KAAK,CAAE,KAHX,CAII,QAAQ,CAAE,wBAAgB,IAAb/B,CAAAA,MAAa,OAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,kBAAR,CAA4BE,OAAO,CAAE2B,MAAM,CAAC6B,KAA5C,CAAD,CAAR,CACH,CANL,EADJ,cASI,6BAAO,OAAO,CAAC,WAAf,CAA2B,KAAK,CAAE,CAAEE,OAAO,CAAE,QAAX,CAAlC,cATJ,CAbJ,CAjEJ,cA0FI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,aAAf,uBADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CACI,KAAK,CAAE/C,WADX,CAEI,EAAE,CAAC,aAFP,CAGI,QAAQ,CAAE,yBAAgB,IAAbgB,CAAAA,MAAa,QAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,aAAR,CAAuBE,OAAO,CAAE2B,MAAM,CAAC6B,KAAvC,CAAD,CAAR,CACH,CALL,EAFJ,CA1FJ,cAoGI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,aAAf,qBADJ,cAEI,gCAAU,KAAK,CAAE5C,WAAjB,CACI,EAAE,CAAC,aADP,CAEI,QAAQ,CAAE,yBAAgB,IAAbe,CAAAA,MAAa,QAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,aAAR,CAAuBE,OAAO,CAAE2B,MAAM,CAAC6B,KAAvC,CAAD,CAAR,CACH,CAJL,EAFJ,CApGJ,cA6GI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,aAAf,4CADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CACI,KAAK,CAAE3C,WADX,CAEI,EAAE,CAAC,aAFP,CAGI,QAAQ,CAAE,yBAAgB,IAAbc,CAAAA,MAAa,QAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,aAAR,CAAuBE,OAAO,CAAE2B,MAAM,CAAC6B,KAAvC,CAAD,CAAR,CACH,CALL,EAFJ,CA7GJ,cAuHI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,eAAf,wBADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CACI,KAAK,CAAEzC,aADX,CAEI,EAAE,CAAC,eAFP,CAGI,QAAQ,CAAE,yBAAgB,IAAbY,CAAAA,MAAa,QAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,eAAR,CAAyBE,OAAO,CAAE2B,MAAM,CAAC6B,KAAzC,CAAD,CAAR,CACH,CALL,EAFJ,CAvHJ,cAiII,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,iBAAf,0BADJ,cAEI,gCAAU,KAAK,CAAExC,eAAjB,CACI,EAAE,CAAC,iBADP,CAEI,QAAQ,CAAE,yBAAgB,IAAbW,CAAAA,MAAa,QAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,iBAAR,CAA2BE,OAAO,CAAE2B,MAAM,CAAC6B,KAA3C,CAAD,CAAR,CACH,CAJL,EAFJ,CAjIJ,cA0II,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,4BAAf,2CADJ,cAEI,0CACI,6BAAO,IAAI,CAAC,OAAZ,CACI,EAAE,CAAC,KADP,CAEI,IAAI,CAAC,4BAFT,CAGI,KAAK,CAAC,MAHV,CAII,QAAQ,CAAE,yBAAgB,IAAb7B,CAAAA,MAAa,QAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,4BAAR,CAAsCE,OAAO,CAAE2B,MAAM,CAAC6B,KAAtD,CAAD,CAAR,CACH,CANL,EADJ,cASI,6BAAO,OAAO,CAAC,KAAf,CAAqB,KAAK,CAAE,CAAEE,OAAO,CAAE,QAAX,CAA5B,QATJ,CAFJ,cAaI,0CACI,6BAAO,IAAI,CAAC,OAAZ,CACI,EAAE,CAAC,QADP,CAEI,IAAI,CAAC,4BAFT,CAGI,KAAK,CAAC,OAHV,CAII,QAAQ,CAAE,yBAAgB,IAAb/B,CAAAA,MAAa,QAAbA,MAAa,CACtBF,QAAQ,CAAC,CAAE3B,IAAI,CAAE,4BAAR,CAAsCE,OAAO,CAAE2B,MAAM,CAAC6B,KAAtD,CAAD,CAAR,CACH,CANL,EADJ,cASI,6BAAO,OAAO,CAAC,QAAf,CAAwB,KAAK,CAAE,CAAEE,OAAO,CAAE,QAAX,CAA/B,OATJ,CAbJ,CA1IJ,cAmKI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEvB,MAA/B,WAnKJ,cAmK0D,4BAAM,KAAK,CAAE,CAAEyB,KAAK,CAAE,KAAT,CAAgBD,WAAW,CAAE,MAA7B,CAAb,EAAqDxC,YAArD,CAnK1D,CAFJ,CAuKKE,SAAS,eACN,2BAAK,KAAK,CAAE,CAAEqC,OAAO,CAAE,MAAX,CAAmBG,aAAa,CAAE,QAAlC,CAA4CC,UAAU,CAAE,QAAxD,CAAkEC,cAAc,CAAE,QAAlF,CAA4FT,QAAQ,CAAE,QAAtG,CAAZ,eACI,2BAAK,KAAK,CAAE,CAAEU,QAAQ,CAAE,OAAZ,CAAqBC,GAAG,CAAE,CAA1B,CAA6BC,KAAK,CAAE,CAApC,CAAuCC,MAAM,CAAE,CAA/C,CAAkDC,IAAI,CAAE,CAAxD,CAA2DC,MAAM,CAAE,EAAnE,CAAuEC,eAAe,CAAE,OAAxF,CAAiGC,OAAO,CAAE,GAA1G,CAAZ,EADJ,cAEI,2BAAK,KAAK,CAAE,CAAEP,QAAQ,CAAE,OAAZ,CAAqBI,IAAI,CAAE,KAA3B,CAAkCD,MAAM,CAAE,KAA1C,CAAiDK,UAAU,CAAE,QAA7D,CAAuEC,YAAY,CAAE,QAArF,CAA+Ff,OAAO,CAAE,MAAxG,CAAgHG,aAAa,CAAE,QAA/H,CAAyIC,UAAU,CAAE,QAArJ,CAA+JC,cAAc,CAAE,QAA/K,CAAyLM,MAAM,CAAE,GAAjM,CAAsMK,MAAM,CAAE,OAA9M,CAAuNC,KAAK,CAAE,OAA9N,CAAuOL,eAAe,CAAE,OAAxP,CAAZ,eACI,2BAAK,KAAK,CAAE,CAAEG,YAAY,CAAE,MAAhB,CAAZ,eACI,4DADJ,CADJ,cAII,2BAAK,KAAK,CAAE,CAAEG,MAAM,CAAE,MAAV,CAAZ,4BAJJ,cAKI,4CACI,8BAAQ,OAAO,CAAE,yBAAMnD,CAAAA,QAAQ,CAAC,CAAE3B,IAAI,CAAE,WAAR,CAAqBE,OAAO,CAAEoB,EAA9B,CAAD,CAAd,EAAjB,oBADJ,cAEI,4BAAM,KAAK,CAAE,CAAEwD,MAAM,CAAE,MAAV,CAAb,SAFJ,cAGI,8BAAQ,OAAO,CAAE,yBAAMnD,CAAAA,QAAQ,CAAC,CAAE3B,IAAI,CAAE,cAAR,CAAD,CAAd,EAAjB,0BAHJ,CALJ,CAFJ,CAxKR,CAFJ,CAJJ,CADJ,CAkMH,CAtZD,CAwZA,cAAeV,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useReducer, useState } from \"react\"\nimport { Redirect } from \"react-router-dom\"\n\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AddDog = () => {\n    const [pageState, setPageState] = useState({\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer !== null) {\n            setPageState({ ...pageState, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    const reducer = (state, action) => {\n        switch (action.type) {\n            case \"dogName\":\n                return { ...state, dogName: action.payload };\n            case \"breed\":\n                let newBreed = state.breed;\n                if (action.payload.checked) {\n                    newBreed[action.payload.breed] = true;\n                    if (action.payload.breed === \"Mixed\" || action.payload.breed === \"Unknown\") {\n                        // delete all other breeds\n                        for (const key in newBreed) {\n                            if (key !== action.payload.breed) {\n                                delete newBreed[key];\n                                document.querySelector(`#${key.split(\" \").join(\"-\")}`).checked = false;\n                            }\n                        }\n                    }\n                } else {\n                    delete newBreed[action.payload.breed];\n                }\n                return { ...state, breed: newBreed };\n            case \"sex\":\n                return { ...state, sex: action.payload }\n            case \"alterationStatus\":\n                return { ...state, alterationStatus: action.payload }\n            case \"dateOfBirth\":\n                return { ...state, dateOfBirth: action.payload }\n            case \"description\":\n                return { ...state, description: action.payload }\n            case \"microchipId\":\n                return { ...state, microchipId: action.payload }\n            case \"expenses\":\n                return { ...state, expenses: action.payload }\n            case \"surrenderDate\":\n                return { ...state, surrenderDate: action.payload }\n            case \"surrenderReason\":\n                return { ...state, surrenderReason: action.payload }\n            case \"surrenderedByAnimalControl\":\n                return { ...state, surrenderedByAnimalControl: action.payload }\n            case \"availableBreeds\":\n                return { ...state, availableBreeds: action.payload }\n            case \"errorMessage\":\n                return { ...state, errorMessage: action.payload }\n            case \"showModal\":\n                return { ...state, id: action.payload, showModal: true }\n            case \"dogDetail\":\n                return { ...state, detailRedirect: true }\n            case \"dogDashboard\":\n                return { ...state, dashboardRedirect: true }\n            default:\n                throw new Error();\n        }\n    };\n\n    const [state, dispatch] = useReducer(\n        reducer,\n        {\n            dogName: \"\",\n            breed: {},\n            sex: null,\n            alterationStatus: null,\n            dateOfBirth: \"\",\n            description: \"\",\n            microchipId: \"\",\n            surrenderDate: \"\",\n            surrenderReason: \"\",\n            surrenderedByAnimalControl: null,\n            availableBreeds: [],\n            errorMessage: \"\",\n            showModal: false,\n            detailRedirect: false,\n            dashboardRedirect: false,\n            id: -1\n        });\n\n    const {\n        dogName,\n        breed,\n        sex,\n        alterationStatus,\n        dateOfBirth,\n        description,\n        microchipId,\n        surrenderDate,\n        surrenderReason,\n        surrenderedByAnimalControl,\n        availableBreeds,\n        errorMessage,\n        showModal,\n        detailRedirect,\n        dashboardRedirect,\n        id\n    } = state;\n\n    useEffect(() => {\n        if (pageState.cookie.hasOwnProperty(\"isTrustedVolunteer\") && pageState.cookie.isTrustedVolunteer !== null) {\n            getData(\"/breed\")\n                .then(({ target }) => {\n                    dispatch({ type: 'availableBreeds', payload: JSON.parse(target.response) });\n                })\n                .catch(error => {\n                    dispatch({ type: \"errorMessage\", payload: error });\n                    console.log(\"error:\", error);\n                })\n        }\n    }, [pageState.cookie]);\n\n    const addDog = () => {\n        const volunteerId = JSON.parse(localStorage.getItem(\"volunteerId\"));\n        const dogData = {\n            name: dogName,\n            breed: Object.keys(breed),\n            sex,\n            alterationStatus: alterationStatus === \"true\" ? true : false,\n            dateOfBirth,\n            description,\n            surrenderDate,\n            surrenderReason,\n            surrenderedByAnimalControl,\n            volunteerId\n        };\n        if (microchipId) {\n            dogData.microchipId = { \"String\": microchipId, \"Valid\": true };\n        }\n        if (validateDog()) {\n            sendData(dogData, \"/dog\")\n                .then(data => {\n                    const { target } = data;\n                    if (target.status === 201) {\n                        // show success modal\n                        dispatch({ type: \"showModal\", payload: JSON.parse(target.response).id });\n                    } else {\n                        console.log(\"error adding dog (non-201):\", target.response);\n                        dispatch({ type: \"errorMessage\", payload: target.response });\n                    }\n                })\n                .catch(error => {\n                    // show error modal\n                    console.log(\"error adding dog (catch):\", error);\n                    dispatch({ type: \"errorMessage\", payload: error });\n                });\n        }\n    }\n\n    const validateDog = () => {\n        if (!dogName) {\n            dispatch({ type: \"errorMessage\", payload: \"Please enter dog name.\" });\n            return false;\n        }\n        if (dogName.toLowerCase() === \"uga\") {\n            let isError = false;\n            Object.keys(breed).forEach(b => {\n                // prohibit any type of bulldog named Uga\n                if (b.toLowerCase().indexOf(\"bulldog\") !== -1) {\n                    dispatch({ type: \"errorMessage\", payload: \"BullDog can not be named 'Uga'.\" });\n                    isError = true;\n                }\n            })\n            if (isError) {\n                return false;\n            }\n        }\n        if (!Object.keys(breed).length) {\n            dispatch({ type: \"errorMessage\", payload: \"Please select at least one dog breed.\" });\n            return false;\n        }\n        if (!sex) {\n            dispatch({ type: \"errorMessage\", payload: \"Please indicate dog's sex (or select unknown).\" });\n            return false;\n        }\n        if (!alterationStatus) {\n            dispatch({ type: \"errorMessage\", payload: \"Please indicate dog's alteration status.\" });\n            return false;\n        }\n        if (!dateOfBirth) {\n            dispatch({ type: \"errorMessage\", payload: \"Please enter dog's date of birth.\" });\n            return false;\n        }\n        if (!description) {\n            dispatch({ type: \"errorMessage\", payload: \"Please enter dog description.\" });\n            return false;\n        }\n        if (!surrenderDate) {\n            dispatch({ type: \"errorMessage\", payload: \"Please enter dog's surrender date.\" });\n            return false;\n        }\n        if (!surrenderReason) {\n            dispatch({ type: \"errorMessage\", payload: \"Please enter reason for dog surrender.\" });\n            return false;\n        }\n        if (!surrenderedByAnimalControl) {\n            dispatch({ type: \"errorMessage\", payload: \"Please indicate whether dog was surrendered by Animal Control.\" });\n            return false;\n        }\n        return true;\n    }\n\n    return (\n        <>\n            {detailRedirect && <Redirect to={{ pathname: `/dog-details/${id}`, state: { from: \"/add-dog\" } }} />}\n            {dashboardRedirect && <Redirect to={{ pathname: \"/dog-dashboard\", state: { from: \"/add-dog\" } }} />}\n            <NavLinks isTrustedVolunteer={pageState.cookie.isTrustedVolunteer} />\n            <main className=\"container\">\n                <h1>Add Dog</h1>\n                <div style={{ overflow: showModal ? \"hidden\" : \"scroll\", clear: \"left\" }}>\n                    <h3>All fields are required unless otherwise stated.</h3>\n                    <form>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"dogName\">Dog Name:</label>\n                            <input type=\"text\"\n                                value={dogName}\n                                id=\"dogName\"\n                                onChange={({ target }) => {\n                                    dispatch({ type: 'dogName', payload: target.value })\n                                }}\n                            />\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"breed\">Dog Breed: (Please select at least one.)</label>\n                            <div className=\"scroll-box\">\n                                {availableBreeds.map(({ id, breed: b = \"\" }) => (\n                                    <p key={id}>\n                                        <input type=\"checkbox\"\n                                            value={b}\n                                            id={b.split(\" \").join(\"-\")}\n                                            onChange={({ target }) => {\n                                                dispatch({ type: 'breed', payload: { breed: target.value, checked: target.checked } })\n                                            }}\n                                            disabled={(breed[\"Mixed\"] || breed[\"Unknown\"]) && !(b === \"Mixed\" || b === \"Unknown\")}\n                                        /><label htmlFor={b} style={{ display: \"inline\", paddingLeft: \"10px\" }}>{b}</label>\n                                    </p>\n                                ))}\n                            </div>\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"sex\">Dog Sex:</label>\n                            <p>\n                                <input type=\"radio\"\n                                    id=\"male\"\n                                    name=\"sex\"\n                                    value=\"male\"\n                                    onChange={({ target }) => {\n                                        dispatch({ type: 'sex', payload: target.value })\n                                    }}\n                                />\n                                <label htmlFor=\"male\" style={{ display: \"inline\" }}>Male</label>\n                            </p>\n                            <p>\n                                <input type=\"radio\"\n                                    id=\"female\"\n                                    name=\"sex\"\n                                    value=\"female\"\n                                    onChange={({ target }) => {\n                                        dispatch({ type: 'sex', payload: target.value })\n                                    }}\n                                />\n                                <label htmlFor=\"female\" style={{ display: \"inline\" }}>Female</label>\n                            </p>\n                            <p>\n                                <input type=\"radio\"\n                                    id=\"unknown\"\n                                    name=\"sex\"\n                                    value=\"unknown\"\n                                    onChange={({ target }) => {\n                                        dispatch({ type: 'sex', payload: target.value })\n                                    }}\n                                />\n                                <label htmlFor=\"unknown\" style={{ display: \"inline\" }}>Unknown</label>\n                            </p>\n\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"alterationStatus\">Dog Alteration Status:</label>\n                            <p>\n                                <input type=\"radio\"\n                                    id=\"altered\"\n                                    name=\"alterationStatus\"\n                                    value={true}\n                                    onChange={({ target }) => {\n                                        dispatch({ type: 'alterationStatus', payload: target.value })\n                                    }}\n                                />\n                                <label htmlFor=\"altered\" style={{ display: \"inline\" }}>Spayed/Neutered</label>\n                            </p>\n                            <p>\n                                <input type=\"radio\"\n                                    id=\"unaltered\"\n                                    name=\"alterationStatus\"\n                                    value={false}\n                                    onChange={({ target }) => {\n                                        dispatch({ type: 'alterationStatus', payload: target.value })\n                                    }}\n                                />\n                                <label htmlFor=\"unaltered\" style={{ display: \"inline\" }}>Unaltered</label>\n                            </p>\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"dateOfBirth\">Dog Date of Birth:</label>\n                            <input type=\"date\"\n                                value={dateOfBirth}\n                                id=\"dateOfBirth\"\n                                onChange={({ target }) => {\n                                    dispatch({ type: 'dateOfBirth', payload: target.value })\n                                }}\n                            />\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"description\">Dog Description:</label>\n                            <textarea value={description}\n                                id=\"description\"\n                                onChange={({ target }) => {\n                                    dispatch({ type: 'description', payload: target.value })\n                                }}\n                            />\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"microchipId\">Dog Microchip ID: (leave blank if none)</label>\n                            <input type=\"text\"\n                                value={microchipId}\n                                id=\"microchipId\"\n                                onChange={({ target }) => {\n                                    dispatch({ type: 'microchipId', payload: target.value })\n                                }}\n                            />\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"surrenderDate\">Dog Surrender Date:</label>\n                            <input type=\"date\"\n                                value={surrenderDate}\n                                id=\"surrenderDate\"\n                                onChange={({ target }) => {\n                                    dispatch({ type: 'surrenderDate', payload: target.value })\n                                }}\n                            />\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"surrenderReason\">Dog Surrender Reason:</label>\n                            <textarea value={surrenderReason}\n                                id=\"surrenderReason\"\n                                onChange={({ target }) => {\n                                    dispatch({ type: 'surrenderReason', payload: target.value })\n                                }}\n                            />\n                        </div>\n                        <div className=\"form-unit\">\n                            <label htmlFor=\"surrenderedByAnimalControl\">Dog Was Surrendered by Animal Control:</label>\n                            <p>\n                                <input type=\"radio\"\n                                    id=\"was\"\n                                    name=\"surrenderedByAnimalControl\"\n                                    value=\"true\"\n                                    onChange={({ target }) => {\n                                        dispatch({ type: 'surrenderedByAnimalControl', payload: target.value })\n                                    }}\n                                />\n                                <label htmlFor=\"was\" style={{ display: \"inline\" }}>Yes</label>\n                            </p>\n                            <p>\n                                <input type=\"radio\"\n                                    id=\"wasNot\"\n                                    name=\"surrenderedByAnimalControl\"\n                                    value=\"false\"\n                                    onChange={({ target }) => {\n                                        dispatch({ type: 'surrenderedByAnimalControl', payload: target.value })\n                                    }}\n                                />\n                                <label htmlFor=\"wasNot\" style={{ display: \"inline\" }}>No</label>\n                            </p>\n                        </div>\n                        <button type=\"button\" onClick={addDog}>Submit</button><span style={{ color: \"red\", paddingLeft: \"10px\" }}>{errorMessage}</span>\n                    </form>\n                    {showModal && (\n                        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", overflow: \"hidden\" }}>\n                            <div style={{ position: \"fixed\", top: 0, right: 0, bottom: 0, left: 0, zIndex: 10, backgroundColor: \"black\", opacity: 0.5 }}></div>\n                            <div style={{ position: \"fixed\", left: \"50%\", bottom: \"50%\", marginLeft: \"-300px\", marginBottom: \"-150px\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", zIndex: 100, height: \"300px\", width: \"600px\", backgroundColor: \"white\" }}>\n                                <div style={{ marginBottom: \"20px\" }}>\n                                    <span>Dog successfully created.</span>\n                                </div>\n                                <div style={{ margin: \"20px\" }}>Would you like to go to</div>\n                                <div>\n                                    <button onClick={() => dispatch({ type: \"dogDetail\", payload: id })}>Dog Detail View</button>\n                                    <span style={{ margin: \"20px\" }}> or </span>\n                                    <button onClick={() => dispatch({ type: \"dogDashboard\" })}>Back to Dog Dashboard</button>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </main>\n        </>\n    );\n}\n\nexport default AddDog;"]},"metadata":{},"sourceType":"module"}