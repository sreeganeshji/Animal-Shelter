{"ast":null,"code":"var _jsxFileName = \"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AddApplication.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AddApplication = () => {\n  const [state, setState] = useState({\n    showModal: false,\n    dashboardRedirect: false,\n    errorMessage: \"\",\n    timeout: -1,\n    applicationId: \"\",\n    loginRedirect: false,\n    cookie: {}\n  }); // check auth\n\n  useEffect(() => {\n    const cookie = isLoggedIn();\n\n    if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer !== null) {\n      setState({ ...state,\n        cookie\n      });\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n\n  }, []);\n  const [applicant, setApplicant] = useState({\n    city: \"\",\n    email: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    phoneNumber: \"\",\n    state: \"\",\n    street: \"\",\n    zip: \"\"\n  });\n  const [application, setApplication] = useState({\n    coApplicantFirstName: \"\",\n    coApplicantLastName: \"\",\n    applicantIdFk: \"\",\n    date: \"\",\n    state: \"\"\n  });\n\n  const updateApplicant = attribute => {\n    let updatedState = applicant;\n    Object.assign(updatedState, attribute);\n    setApplicant({ ...updatedState\n    });\n  };\n\n  const updateApplication = attribute => {\n    let updatedState = application;\n    Object.assign(updatedState, attribute);\n    setApplication({ ...updatedState\n    });\n  };\n\n  const postApplicant = () => {\n    if (applicant.email === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant email.\"\n      });\n      return;\n    }\n\n    if (applicant.firstName === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant first name.\"\n      });\n      return;\n    }\n\n    if (applicant.lastName === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant last name.\"\n      });\n      return;\n    }\n\n    if (applicant.street === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant street address.\"\n      });\n      return;\n    }\n\n    if (applicant.city === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant city.\"\n      });\n      return;\n    }\n\n    if (applicant.state === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant state.\"\n      });\n      return;\n    }\n\n    if (applicant.state.length > 2) {\n      setState({ ...state,\n        errorMessage: \"Please use 2-letter state abbreviation.\"\n      });\n      return;\n    }\n\n    if (applicant.zip === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant zip code.\"\n      });\n      return;\n    }\n\n    if (applicant.phoneNumber === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant phone number.\"\n      });\n      return;\n    }\n\n    sendData(applicant, `/applicant`).then(({\n      target\n    }) => {\n      const applicant = JSON.parse(target.response);\n\n      if (target.status === 201 && applicant.email) {\n        // show success modal\n        setApplicant(applicant);\n        updateApplication({\n          applicantIdFk: applicant.id\n        });\n        postApplication();\n      } else {\n        console.log(\"error adding application (non-201):\", target.response);\n        setState({ ...state,\n          \"errorMessage\": target.response\n        });\n      }\n    }).catch(error => {\n      // show error modal\n      console.log(\"error adding application (catch):\", error);\n      setState({ ...state,\n        \"errorMessage\": error\n      });\n    });\n  };\n\n  const postApplication = () => {\n    if (applicant.email === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant email.\"\n      });\n      return;\n    }\n\n    if (applicant.firstName === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant first name.\"\n      });\n      return;\n    }\n\n    if (applicant.lastName === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant last name.\"\n      });\n      return;\n    }\n\n    if (applicant.street === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant street address.\"\n      });\n      return;\n    }\n\n    if (applicant.city === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant city.\"\n      });\n      return;\n    }\n\n    if (applicant.state === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant state.\"\n      });\n      return;\n    }\n\n    if (applicant.state.length > 2) {\n      setState({ ...state,\n        errorMessage: \"Please use 2-letter state abbreviation.\"\n      });\n      return;\n    }\n\n    if (applicant.zip === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant zip code.\"\n      });\n      return;\n    }\n\n    if (applicant.phoneNumber === \"\") {\n      setState({ ...state,\n        errorMessage: \"Please add applicant phone number.\"\n      });\n      return;\n    }\n\n    sendData(application, `/application`).then(({\n      target\n    }) => {\n      if (target.status === 201) {\n        // show success modal\n        setState({ ...state,\n          applicationId: JSON.parse(target.response).id,\n          showModal: true\n        });\n      } else {\n        console.log(\"error adding application (non-201):\", target.response);\n        setState({ ...state,\n          \"errorMessage\": target.response\n        });\n      }\n    }).catch(error => {\n      // show error modal\n      console.log(\"error adding application (catch):\", error);\n      setState({ ...state,\n        \"errorMessage\": error\n      });\n    });\n  };\n\n  const submitApplication = () => {\n    if (application.applicantIdFk) {\n      postApplication();\n    } else {\n      postApplicant();\n    }\n  };\n\n  const resetPage = () => {\n    setApplicant({\n      city: \"\",\n      email: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      phoneNumber: \"\",\n      state: \"\",\n      street: \"\",\n      zip: \"\"\n    });\n    setApplication({\n      coApplicantFirstName: \"\",\n      coApplicantLastName: \"\",\n      applicantIdFk: \"\",\n      date: \"\",\n      state: \"\"\n    });\n    setState({ ...state,\n      showModal: false,\n      dashboardRedirect: false,\n      errorMessage: \"\",\n      timeout: -1,\n      applicationId: \"\",\n      loginRedirect: false\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, state.dashboardRedirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: \"/dog-dashboard\",\n      state: {\n        from: \"/add-dog\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(NavLinks, {\n    isTrustedVolunteer: state.cookie.isTrustedVolunteer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, \"Add Application\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 25\n    }\n  }, \"Applicant Email Address:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-email\",\n    value: applicant.email,\n    onChange: ({\n      target\n    }) => {\n      updateApplicant({\n        \"email\": target.value\n      }); // debounce for 300 milliseconds\n\n      clearTimeout(state.timeout);\n      setState({ ...state,\n        timeout: setTimeout(() => {\n          // make http call for applicant\n          getData(`/applicant/${applicant.email}`).then(({\n            target\n          }) => {\n            let applicant = JSON.parse(target.response);\n\n            if (target.status === 200 && applicant.email) {\n              setApplicant(applicant);\n              updateApplication({\n                applicantIdFk: applicant.id\n              });\n            }\n          }).catch(error => {\n            console.log(error);\n          });\n        }, 400)\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 25\n    }\n  }, \"Applicant First Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-first-name\",\n    value: applicant.firstName,\n    onChange: ({\n      target\n    }) => updateApplicant({\n      \"firstName\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 25\n    }\n  }, \"Applicant Last Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-last-name\",\n    value: applicant.lastName,\n    onChange: ({\n      target\n    }) => updateApplicant({\n      \"lastName\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 25\n    }\n  }, \"Street Address:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-stree-address\",\n    value: applicant.street,\n    onChange: ({\n      target\n    }) => updateApplicant({\n      \"street\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 25\n    }\n  }, \"City:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-city\",\n    value: applicant.city,\n    onChange: ({\n      target\n    }) => updateApplicant({\n      \"city\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 25\n    }\n  }, \"State: (2 Letters)\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-state\",\n    value: applicant.state,\n    onChange: ({\n      target\n    }) => updateApplicant({\n      \"state\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 25\n    }\n  }, \"Zip Code:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-zip-code\",\n    value: applicant.zip,\n    onChange: ({\n      target\n    }) => updateApplicant({\n      \"zip\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 25\n    }\n  }, \"Phone Number:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-phone-number\",\n    value: applicant.phoneNumber,\n    onChange: ({\n      target\n    }) => updateApplicant({\n      \"phoneNumber\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 25\n    }\n  }, \"Co-Applicant First Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-co-applicant-first-name\",\n    value: applicant.coApplicantFirstName,\n    onChange: ({\n      target\n    }) => updateApplication({\n      \"coApplicantFirstName\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 25\n    }\n  }, \"Co-Applicant Last Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"applicant-co-applicant-last-name\",\n    value: applicant.coApplicantLastName,\n    onChange: ({\n      target\n    }) => updateApplication({\n      \"coApplicantLastName\": target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: submitApplication,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 21\n    }\n  }, \"Submit Application\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\",\n      paddingLeft: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 98\n    }\n  }, state.errorMessage)), state.showModal && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      overflow: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      zIndex: 10,\n      backgroundColor: \"black\",\n      opacity: 0.5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      left: \"50%\",\n      bottom: \"50%\",\n      marginLeft: \"-300px\",\n      marginBottom: \"-150px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      zIndex: 100,\n      height: \"300px\",\n      width: \"600px\",\n      backgroundColor: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginBottom: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 33\n    }\n  }, \"Application successfully created.\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginBottom: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 33\n    }\n  }, \"Application #\", state.applicationId)), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 29\n    }\n  }, \"Would you like to go to\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: resetPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 33\n    }\n  }, \"Add another application\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      margin: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 33\n    }\n  }, \" or \"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setState({ ...state,\n      dashboardRedirect: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 33\n    }\n  }, \"Back to Dog Dashboard\"))))));\n};\n\nexport default AddApplication;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/AddApplication.js"],"names":["React","useEffect","useState","Redirect","getData","sendData","isLoggedIn","NavLinks","AddApplication","state","setState","showModal","dashboardRedirect","errorMessage","timeout","applicationId","loginRedirect","cookie","hasOwnProperty","isTrustedVolunteer","applicant","setApplicant","city","email","firstName","lastName","phoneNumber","street","zip","application","setApplication","coApplicantFirstName","coApplicantLastName","applicantIdFk","date","updateApplicant","attribute","updatedState","Object","assign","updateApplication","postApplicant","length","then","target","JSON","parse","response","status","id","postApplication","console","log","catch","error","submitApplication","resetPage","pathname","from","value","clearTimeout","setTimeout","color","paddingLeft","display","flexDirection","alignItems","justifyContent","overflow","position","top","right","bottom","left","zIndex","backgroundColor","opacity","marginLeft","marginBottom","height","width","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport { getData, sendData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nconst AddApplication = () => {\n    const [state, setState] = useState({\n        showModal: false,\n        dashboardRedirect: false,\n        errorMessage: \"\",\n        timeout: -1,\n        applicationId: \"\",\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer !== null) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    const [applicant, setApplicant] = useState({\n        city: \"\",\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        phoneNumber: \"\",\n        state: \"\",\n        street: \"\",\n        zip: \"\"\n    });\n\n    const [application, setApplication] = useState({\n        coApplicantFirstName: \"\",\n        coApplicantLastName: \"\",\n        applicantIdFk: \"\",\n        date: \"\",\n        state: \"\"\n    });\n\n    const updateApplicant = (attribute) => {\n        let updatedState = applicant;\n        Object.assign(updatedState, attribute);\n        setApplicant({ ...updatedState });\n    };\n\n    const updateApplication = (attribute) => {\n        let updatedState = application;\n        Object.assign(updatedState, attribute);\n        setApplication({ ...updatedState });\n    };\n\n    const postApplicant = () => {\n        if (applicant.email === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant email.\" });\n            return;\n        }\n        if (applicant.firstName === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant first name.\" });\n            return;\n        }\n        if (applicant.lastName === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant last name.\" });\n            return;\n        }\n        if (applicant.street === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant street address.\" });\n            return;\n        }\n        if (applicant.city === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant city.\" });\n            return;\n        }\n        if (applicant.state === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant state.\" });\n            return;\n        }\n        if (applicant.state.length > 2) {\n            setState({ ...state, errorMessage: \"Please use 2-letter state abbreviation.\" });\n            return;\n        }\n        if (applicant.zip === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant zip code.\" });\n            return;\n        }\n        if (applicant.phoneNumber === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant phone number.\" });\n            return;\n        }\n        sendData(applicant, `/applicant`)\n            .then(({ target }) => {\n                const applicant = JSON.parse(target.response);\n                if (target.status === 201 && applicant.email) {\n                    // show success modal\n                    setApplicant(applicant)\n                    updateApplication({ applicantIdFk: applicant.id })\n                    postApplication()\n                } else {\n                    console.log(\"error adding application (non-201):\", target.response);\n                    setState({ ...state, \"errorMessage\": target.response });\n                }\n            })\n            .catch(error => {\n                // show error modal\n                console.log(\"error adding application (catch):\", error);\n                setState({ ...state, \"errorMessage\": error });\n            });\n    };\n\n    const postApplication = () => {\n        if (applicant.email === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant email.\" });\n            return;\n        }\n        if (applicant.firstName === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant first name.\" });\n            return;\n        }\n        if (applicant.lastName === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant last name.\" });\n            return;\n        }\n        if (applicant.street === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant street address.\" });\n            return;\n        }\n        if (applicant.city === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant city.\" });\n            return;\n        }\n        if (applicant.state === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant state.\" });\n            return;\n        }\n        if (applicant.state.length > 2) {\n            setState({ ...state, errorMessage: \"Please use 2-letter state abbreviation.\" });\n            return;\n        }\n        if (applicant.zip === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant zip code.\" });\n            return;\n        }\n        if (applicant.phoneNumber === \"\") {\n            setState({ ...state, errorMessage: \"Please add applicant phone number.\" });\n            return;\n        }\n        sendData(application, `/application`)\n            .then(({ target }) => {\n                if (target.status === 201) {\n                    // show success modal\n                    setState({ ...state, applicationId: JSON.parse(target.response).id, showModal: true });\n                } else {\n                    console.log(\"error adding application (non-201):\", target.response);\n                    setState({ ...state, \"errorMessage\": target.response });\n                }\n            })\n            .catch(error => {\n                // show error modal\n                console.log(\"error adding application (catch):\", error);\n                setState({ ...state, \"errorMessage\": error });\n            });\n    };\n\n    const submitApplication = () => {\n        if (application.applicantIdFk) {\n            postApplication();\n        } else {\n            postApplicant();\n        }\n    };\n\n    const resetPage = () => {\n        setApplicant({\n            city: \"\",\n            email: \"\",\n            firstName: \"\",\n            lastName: \"\",\n            phoneNumber: \"\",\n            state: \"\",\n            street: \"\",\n            zip: \"\"\n        });\n\n        setApplication({\n            coApplicantFirstName: \"\",\n            coApplicantLastName: \"\",\n            applicantIdFk: \"\",\n            date: \"\",\n            state: \"\"\n        });\n\n        setState({\n            ...state,\n            showModal: false,\n            dashboardRedirect: false,\n            errorMessage: \"\",\n            timeout: -1,\n            applicationId: \"\",\n            loginRedirect: false\n        });\n    }\n\n    return (\n        <>\n            {state.dashboardRedirect && <Redirect to={{ pathname: \"/dog-dashboard\", state: { from: \"/add-dog\" } }} />}\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <main className=\"container\">\n                <h1>Add Application</h1>\n                <form>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Applicant Email Address:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-email\"\n                            value={applicant.email}\n                            onChange={({ target }) => {\n                                updateApplicant({ \"email\": target.value })\n                                // debounce for 300 milliseconds\n                                clearTimeout(state.timeout);\n                                setState({\n                                    ...state, timeout: setTimeout(() => {\n                                        // make http call for applicant\n                                        getData(`/applicant/${applicant.email}`)\n                                            .then(({ target }) => {\n                                                let applicant = JSON.parse(target.response);\n                                                if (target.status === 200 && applicant.email) {\n                                                    setApplicant(applicant);\n                                                    updateApplication({ applicantIdFk: applicant.id })\n                                                }\n                                            })\n                                            .catch(error => {\n                                                console.log(error);\n                                            })\n                                    }, 400)\n                                });\n                            }}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Applicant First Name:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-first-name\"\n                            value={applicant.firstName}\n                            onChange={({ target }) => updateApplicant({ \"firstName\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Applicant Last Name:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-last-name\"\n                            value={applicant.lastName}\n                            onChange={({ target }) => updateApplicant({ \"lastName\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Street Address:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-stree-address\"\n                            value={applicant.street}\n                            onChange={({ target }) => updateApplicant({ \"street\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">City:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-city\"\n                            value={applicant.city}\n                            onChange={({ target }) => updateApplicant({ \"city\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">State: (2 Letters)</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-state\"\n                            value={applicant.state}\n                            onChange={({ target }) => updateApplicant({ \"state\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Zip Code:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-zip-code\"\n                            value={applicant.zip}\n                            onChange={({ target }) => updateApplicant({ \"zip\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Phone Number:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-phone-number\"\n                            value={applicant.phoneNumber}\n                            onChange={({ target }) => updateApplicant({ \"phoneNumber\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Co-Applicant First Name:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-co-applicant-first-name\"\n                            value={applicant.coApplicantFirstName}\n                            onChange={({ target }) => updateApplication({ \"coApplicantFirstName\": target.value })}\n                        />\n                    </div>\n                    <div className=\"form-unit\">\n                        <label htmlFor=\"\">Co-Applicant Last Name:</label>\n                        <input\n                            type=\"text\"\n                            id=\"applicant-co-applicant-last-name\"\n                            value={applicant.coApplicantLastName}\n                            onChange={({ target }) => updateApplication({ \"coApplicantLastName\": target.value })}\n                        />\n                    </div>\n                    <button type=\"button\" onClick={submitApplication}>Submit Application</button><span style={{ color: \"red\", paddingLeft: \"10px\" }}>{state.errorMessage}</span>\n                </form>\n                {state.showModal && (\n                    <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", overflow: \"hidden\" }}>\n                        <div style={{ position: \"fixed\", top: 0, right: 0, bottom: 0, left: 0, zIndex: 10, backgroundColor: \"black\", opacity: 0.5 }}></div>\n                        <div style={{ position: \"fixed\", left: \"50%\", bottom: \"50%\", marginLeft: \"-300px\", marginBottom: \"-150px\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", zIndex: 100, height: \"300px\", width: \"600px\", backgroundColor: \"white\" }}>\n                            <div style={{ marginBottom: \"20px\" }}>\n                                <span>Application successfully created.</span>\n                            </div>\n                            <div style={{ marginBottom: \"20px\" }}>\n                                <span>Application #{state.applicationId}</span>\n                            </div>\n                            <div style={{ margin: \"20px\" }}>Would you like to go to</div>\n                            <div>\n                                <button onClick={resetPage}>Add another application</button>\n                                <span style={{ margin: \"20px\" }}> or </span>\n                                <button onClick={() => setState({ ...state, dashboardRedirect: true })}>Back to Dog Dashboard</button>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </main>\n        </>\n    )\n\n\n}\n\nexport default AddApplication;"]},"metadata":{},"sourceType":"module"}