{"ast":null,"code":"import _objectSpread from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{getData}from\"../services/api\";import{isLoggedIn}from\"../services/auth\";import{NavLinks}from\"../components\";function getMonthName(monthNum){switch(monthNum){case 0:return\"January\";case 1:return\"February\";case 2:return\"March\";case 3:return\"April\";case 4:return\"May\";case 5:return\"June\";case 6:return\"July\";case 7:return\"August\";case 8:return\"September\";case 9:return\"October\";case 10:return\"November\";case 11:return\"December\";default:return\"month\";}}function GetMonthOffset(offset){var today=new Date();today.setMonth(today.getMonth()+offset);return getMonthName(today.getMonth())+\" \"+today.getFullYear();}var MonthlyAdoptionReport=function MonthlyAdoptionReport(){var _useState=useState({data:{},errorMessage:\"\",loginRedirect:false,cookie:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];// check auth\nuseEffect(function(){var cookie=isLoggedIn();if(cookie.hasOwnProperty(\"isTrustedVolunteer\")&&cookie.isTrustedVolunteer){setState(_objectSpread(_objectSpread({},state),{},{cookie:cookie}));}/* eslint-disable react-hooks/exhaustive-deps */},[]);useEffect(function(){for(var i=-11;i<=0;i++){UpdateTables(i);}},[state.cookie]);function UpdateTables(ind){if(state.cookie.hasOwnProperty(\"isTrustedVolunteer\")&&state.cookie.isTrustedVolunteer){getData(\"/monthly-adoption-report?month=\"+ind).then(function(_ref){var target=_ref.target;if(target.status===200){var dataDict=state.data;dataDict[ind]=JSON.parse(target.response);setState(_objectSpread(_objectSpread({},state),{},{data:dataDict}));}else{setState(_objectSpread(_objectSpread({},state),{},{errorMessage:target.response}));}}).catch(function(error){console.log(error);setState(_objectSpread(_objectSpread({},state),{},{errorMessage:JSON.stringify(error)}));});}}function getTableValues(){var indices=[];var i=0;for(i=-11;i<=0;i++){indices.push(i);}return indices.map(function(indx){if(indx in state.data){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h3\",null,GetMonthOffset(indx))),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null)),state.data[indx].map(function(datum){var expenseCents=function(){var cents=Math.round(datum.Expenses.Float64%100);return cents<10?\"0\"+cents:cents;}();var expenseDollars=Math.floor(datum.Expenses.Float64/100);var adoptionFeeCents=function(){var cents=Math.round(datum.AdoptionFees.Float64%100);return cents<10?\"0\"+cents:cents;}();var adoptionFeeDollars=Math.floor(datum.AdoptionFees.Float64/100);var profitCents=function(){var cents=Math.round(datum.Profit.Float64%100);return cents<10?\"0\"+cents:cents;}();var profitDollars=Math.floor(datum.Profit.Float64/100);return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,datum.breed),/*#__PURE__*/React.createElement(\"td\",null,datum.SurrenderCount.Float64),/*#__PURE__*/React.createElement(\"td\",null,datum.AdoptionCount.Float64),/*#__PURE__*/React.createElement(\"td\",null,\"$\",expenseDollars,\".\",expenseCents),/*#__PURE__*/React.createElement(\"td\",null,\"$\",adoptionFeeDollars,\".\",adoptionFeeCents),/*#__PURE__*/React.createElement(\"td\",null,\"$\",profitDollars,\".\",profitCents));}));}});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLinks,{isTrustedVolunteer:state.cookie.isTrustedVolunteer}),/*#__PURE__*/React.createElement(\"main\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Monthly Adoption Report\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Breed\"),/*#__PURE__*/React.createElement(\"td\",null,\"Surrender Count\"),/*#__PURE__*/React.createElement(\"td\",null,\"Adoption Count\"),/*#__PURE__*/React.createElement(\"td\",null,\"Expenses\"),/*#__PURE__*/React.createElement(\"td\",null,\"Adoption Fees\"),/*#__PURE__*/React.createElement(\"td\",null,\"Profit\")),/*#__PURE__*/React.createElement(\"tbody\",null,getTableValues())),state.errorMessage&&/*#__PURE__*/React.createElement(\"div\",{styles:{color:\"red\"}},state.errorMessage)));};export default MonthlyAdoptionReport;","map":{"version":3,"sources":["/Users/ganesh/Desktop/OMSCS/DBMS/Phase1/CS6400-2020-02-Team26/Phase_3/client/src/containers/MonthlyAdoptionReport.js"],"names":["React","useEffect","useState","getData","isLoggedIn","NavLinks","getMonthName","monthNum","GetMonthOffset","offset","today","Date","setMonth","getMonth","getFullYear","MonthlyAdoptionReport","data","errorMessage","loginRedirect","cookie","state","setState","hasOwnProperty","isTrustedVolunteer","i","UpdateTables","ind","then","target","status","dataDict","JSON","parse","response","catch","error","console","log","stringify","getTableValues","indices","push","map","indx","datum","expenseCents","cents","Math","round","Expenses","Float64","expenseDollars","floor","adoptionFeeCents","AdoptionFees","adoptionFeeDollars","profitCents","Profit","profitDollars","breed","SurrenderCount","AdoptionCount","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { getData } from \"../services/api\";\nimport { isLoggedIn } from \"../services/auth\";\nimport { NavLinks } from \"../components\";\n\nfunction getMonthName(monthNum) {\n    switch (monthNum) {\n        case 0: return \"January\"\n        case 1: return \"February\"\n        case 2: return \"March\"\n        case 3: return \"April\"\n        case 4: return \"May\"\n        case 5: return \"June\"\n        case 6: return \"July\"\n        case 7: return \"August\"\n        case 8: return \"September\"\n        case 9: return \"October\"\n        case 10: return \"November\"\n        case 11: return \"December\"\n\n        default: return \"month\"\n\n    }\n}\n\nfunction GetMonthOffset(offset) {\n    let today = new Date()\n    today.setMonth(today.getMonth() + offset)\n\n    return getMonthName(today.getMonth()) + \" \" + today.getFullYear()\n}\n\nconst MonthlyAdoptionReport = () => {\n\n    const [state, setState] = useState({\n        data: {},\n        errorMessage: \"\",\n        loginRedirect: false,\n        cookie: {}\n    });\n\n    // check auth\n    useEffect(() => {\n        const cookie = isLoggedIn();\n        if (cookie.hasOwnProperty(\"isTrustedVolunteer\") && cookie.isTrustedVolunteer) {\n            setState({ ...state, cookie });\n        }\n        /* eslint-disable react-hooks/exhaustive-deps */\n    }, []);\n\n    useEffect(() => {\n        for (let i = -11; i <= 0; i++) {\n            UpdateTables(i)\n        }\n\n    }, [state.cookie]);\n\n    function UpdateTables(ind) {\n\n        if (state.cookie.hasOwnProperty(\"isTrustedVolunteer\") && state.cookie.isTrustedVolunteer) {\n            getData(\"/monthly-adoption-report?month=\" + ind)\n                .then(({ target }) => {\n                    if (target.status === 200) {\n\n                        const dataDict = state.data\n                        dataDict[ind] = JSON.parse(target.response)\n\n                        setState({ ...state, data: dataDict });\n\n                    } else {\n                        setState({ ...state, errorMessage: target.response });\n                    }\n                })\n                .catch(error => {\n                    console.log(error);\n                    setState({ ...state, errorMessage: JSON.stringify(error) });\n                })\n        }\n    }\n\n    function getTableValues() {\n        var indices = [];\n        var i = 0;\n        for (i = -11; i <= 0; i++) {\n            indices.push(i);\n        }\n\n        return (\n            indices.map(indx => {\n                if (indx in state.data) {\n\n\n                    return (\n                        <>\n                            <tr>\n                                <td>\n                                    <h3>{GetMonthOffset(indx)}</h3></td>\n                                <td></td>\n                                <td></td>\n                                <td></td>\n                                <td></td>\n                                <td></td>\n                            </tr>\n                            {state.data[indx].map(datum => {\n                                const expenseCents = (() => {\n                                    const cents = Math.round(datum.Expenses.Float64 % 100);\n                                    return cents < 10 ? \"0\" + cents : cents;\n                                })();\n                                const expenseDollars = Math.floor(datum.Expenses.Float64 / 100);\n\n                                const adoptionFeeCents = (() => {\n                                    const cents = Math.round(datum.AdoptionFees.Float64 % 100);\n                                    return cents < 10 ? \"0\" + cents : cents;\n                                })();\n                                const adoptionFeeDollars = Math.floor(datum.AdoptionFees.Float64 / 100);\n\n                                const profitCents = (() => {\n                                    const cents = Math.round(datum.Profit.Float64 % 100);\n                                    return cents < 10 ? \"0\" + cents : cents;\n                                })();\n                                const profitDollars = Math.floor(datum.Profit.Float64 / 100);\n\n                                return (\n                                    <tr>\n                                        <td>{datum.breed}</td>\n                                        <td>{datum.SurrenderCount.Float64}</td>\n                                        <td>{datum.AdoptionCount.Float64}</td>\n                                        <td>${expenseDollars}.{expenseCents}</td>\n                                        <td>${adoptionFeeDollars}.{adoptionFeeCents}</td>\n                                        <td>${profitDollars}.{profitCents}</td>\n                                    </tr>\n                                )\n                            }\n                            )}\n                        </>\n\n                    )\n\n                }\n            }\n\n            )\n\n        )\n    }\n\n    return (\n        <>\n            <NavLinks isTrustedVolunteer={state.cookie.isTrustedVolunteer} />\n            <main className=\"container\">\n                <h1>Monthly Adoption Report</h1>\n                <table>\n                    <thead>\n                        <td>Breed</td>\n                        <td>Surrender Count</td>\n                        <td>Adoption Count</td>\n                        <td>Expenses</td>\n                        <td>Adoption Fees</td>\n                        <td>Profit</td>\n                    </thead>\n                    <tbody>\n                        {\n                            getTableValues()\n                        }\n                    </tbody>\n                </table>\n\n                {state.errorMessage && (\n                    <div styles={{ color: \"red\" }}>{state.errorMessage}</div>\n                )}\n            </main>\n        </>\n    );\n}\n\nexport default MonthlyAdoptionReport;\n\n"]},"metadata":{},"sourceType":"module"}